
<!DOCTYPE html>

<html lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>AzureML AutoML Demo</title>
<link href="../../../_static/css/theme.css" rel="stylesheet"/>
<link href="../../../_static/css/index.c5995385ac14fb8791e8eb36b4908be2.css" rel="stylesheet"/>
<link href="../../../_static/vendor/fontawesome/5.13.0/css/all.min.css" rel="stylesheet"/>
<link as="font" crossorigin="" href="../../../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2" rel="preload" type="font/woff2"/>
<link as="font" crossorigin="" href="../../../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2" rel="preload" type="font/woff2"/>
<link href="../../../_static/pygments.css" rel="stylesheet" type="text/css">
<link href="../../../_static/sphinx-book-theme.5f77b4aec8189eecf79907ce328c390d.css" rel="stylesheet" type="text/css">
<link href="../../../_static/togglebutton.css" rel="stylesheet" type="text/css">
<link href="../../../_static/mystnb.css" rel="stylesheet" type="text/css"/>
<link as="script" href="../../../_static/js/index.1c5a1a01449ed65a7b51.js" rel="preload"/>
<script data-url_root="./" id="documentation_options" src="../../../_static/documentation_options.js"></script>
<script src="../../../_static/jquery.js"></script>
<script src="../../../_static/underscore.js"></script>
<script src="../../../_static/doctools.js"></script>
<script src="../../../_static/togglebutton.js"></script>
<script>var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
<script src="../../../_static/sphinx-book-theme.12a9622fbb08dcb3a2a40b2c02b83a57.js"></script>
<link href="genindex.html" rel="index" title="Index">
<link href="search.html" rel="search" title="Search"/>
<meta content="width=device-width, initial-scale=1" name="viewport"/>
<meta content="en" name="docsearch:language"/>
</link></link></link></link></head>
<body data-offset="80" data-spy="scroll" data-target="#bd-toc-nav">
<div class="container-fluid" id="banner"></div>
<div class="container-xl">
<div class="row">
<div class="col-12 col-md-2 bd-sidebar site-navigation show single-page" id="site-navigation">
</div>
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
<div class="topbar container-xl fixed-top">
<div class="topbar-contents row">
<div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show"></div>
<div class="col pl-md-4 topbar-main">
<div class="dropdown-buttons-trigger">
<button aria-label="Download this page" class="btn btn-secondary topbarbtn" id="dropdown-buttons-trigger"><i class="fas fa-download"></i></button>
<div class="dropdown-buttons">
<!-- ipynb file if we had a myst markdown file -->
<!-- Download raw file -->
<a class="dropdown-buttons" href="_sources/azureml_utils_example.ipynb.txt"><button class="btn btn-secondary topbarbtn" data-placement="left" data-toggle="tooltip" title="Download source file" type="button">.ipynb</button></a>
<!-- Download PDF via print -->
<button class="btn btn-secondary topbarbtn" data-placement="left" data-toggle="tooltip" id="download-print" onclick="window.print()" title="Print to PDF" type="button">.pdf</button>
</div>
</div>
<!-- Source interaction buttons -->
<div class="dropdown-buttons-trigger">
<button aria-label="Connect with source repository" class="btn btn-secondary topbarbtn" id="dropdown-buttons-trigger"><i class="fab fa-github"></i></button>
<div class="dropdown-buttons sourcebuttons">
<a class="repository-button" href="https://github.com/mlrun/marketplace"><button class="btn btn-secondary topbarbtn" data-placement="left" data-toggle="tooltip" title="Source repository" type="button"><i class="fab fa-github"></i>repository</button></a>
<a class="issues-button" href="https://github.com/mlrun/marketplace/issues/new?title=Issue%20on%20page%20%2Fazureml_utils_example.html&amp;body=Your%20issue%20content%20here."><button class="btn btn-secondary topbarbtn" data-placement="left" data-toggle="tooltip" title="Open an issue" type="button"><i class="fas fa-lightbulb"></i>open issue</button></a>
<a class="edit-button" href="https://github.com/mlrun/marketplace/edit/master/docs/azureml_utils_example.ipynb"><button class="btn btn-secondary topbarbtn" data-placement="left" data-toggle="tooltip" title="Edit this page" type="button"><i class="fas fa-pencil-alt"></i>suggest edit</button></a>
</div>
</div>
<!-- Full screen (wrap in <a> to have style consistency -->
<a class="full-screen-button"><button aria-label="Fullscreen mode" class="btn btn-secondary topbarbtn" data-placement="bottom" data-toggle="tooltip" onclick="toggleFullScreen()" title="Fullscreen mode" type="button"><i class="fas fa-expand"></i></button></a>
<!-- Launch buttons -->
</div>
<!-- Table of contents -->
<div class="d-none d-md-block col-md-2 bd-toc show">
<div class="tocsection onthispage pt-5 pb-3">
<i class="fas fa-list"></i> Contents
            </div>
<nav id="bd-toc-nav">
<ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry">
<a class="reference internal nav-link" href="#setup-mlrun-project">
   1. Setup MLRun Project
  </a>
</li>
<li class="toc-h2 nav-item toc-entry">
<a class="reference internal nav-link" href="#preparing-dataset-iris">
   2. Preparing Dataset (Iris)
  </a>
</li>
<li class="toc-h2 nav-item toc-entry">
<a class="reference internal nav-link" href="#submit-azure-automl-training-job">
   3. Submit Azure AutoML Training Job
  </a>
<ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry">
<a class="reference internal nav-link" href="#submit-azure-secrets">
     Submit Azure Secrets
    </a>
</li>
<li class="toc-h3 nav-item toc-entry">
<a class="reference internal nav-link" href="#import-azureml-utils-from-marketplace">
     Import
     <code class="docutils literal notranslate">
<span class="pre">
       azureml_utils
      </span>
</code>
     from marketplace
    </a>
</li>
<li class="toc-h3 nav-item toc-entry">
<a class="reference internal nav-link" href="#automl-configuration-run-parameters">
     Automl configuration &amp; run parameters
    </a>
</li>
<li class="toc-h3 nav-item toc-entry">
<a class="reference internal nav-link" href="#run-azure-automl-train">
     Run Azure AutoML train:
    </a>
</li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry">
<a class="reference internal nav-link" href="#deploy-model-serving">
   4. Deploy Model Serving
  </a>
<ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry">
<a class="reference internal nav-link" href="#building-and-deploying-the-serving-function">
     Building and Deploying the Serving Function
    </a>
</li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry">
<a class="reference internal nav-link" href="#using-the-live-model-serving-function">
   5. Using the Live Model-Serving Function
  </a>
</li>
<li class="toc-h2 nav-item toc-entry">
<a class="reference internal nav-link" href="#clean-up">
   6. Clean up
  </a>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="row" id="main-content">
<div class="col-12 col-md-9 pl-md-3 pr-md-0">
<div>
<div class="tex2jax_ignore mathjax_ignore section" id="azureml-automl-demo">
<h1>AzureML AutoML Demo<a class="headerlink" href="#azureml-automl-demo" title="Permalink to this headline">¶</a></h1>
<p>MLRun function for using Azure AutoML, Including the following handlers:</p>
<ol class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">init_experiment</span></code> -     Initialize workspace and experiment in Azure ML.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">init_compute</span></code> -        Initialize Azure ML compute target to run experiment.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">register_dataset</span></code> -    Register dataset object (can be also an Iguazio FeatureVector) in Azure ML.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">download_model</span></code> -      Download trained model from Azure ML to local filesystem.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">upload_model</span></code> -        Upload pre-trained model from local filesystem to Azure ML.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">submit_training_job</span></code> - Submit training job to Azure AutoML and download trained model when completed.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">automl_train</span></code> -        Whole training flow for Azure AutoML:
- Initializing workspace and experiment in Azure ML
- Registers dataset/feature vector,
- submits training job
- downloads trained model</p></li>
</ol>
<div class="section" id="setup-mlrun-project">
<h2>1. Setup MLRun Project<a class="headerlink" href="#setup-mlrun-project" title="Permalink to this headline">¶</a></h2>
<p>Creating MLRun project</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">mlrun</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Initialize the MLRun project object</span>
<span class="n">project</span> <span class="o">=</span> <span class="n">mlrun</span><span class="o">.</span><span class="n">get_or_create_project</span><span class="p">(</span><span class="s1">'azureml'</span><span class="p">,</span> <span class="n">context</span><span class="o">=</span><span class="s2">"./"</span><span class="p">,</span> <span class="n">user_project</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&gt; 2022-01-26 12:57:21,920 [info] created and saved project azureml
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="preparing-dataset-iris">
<h2>2. Preparing Dataset (Iris)<a class="headerlink" href="#preparing-dataset-iris" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>Preparing training URI for the MLRun function</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">DATA_URL</span> <span class="o">=</span> <span class="s2">"https://s3.wasabisys.com/iguazio/data/iris/iris_dataset.csv"</span>

<span class="n">mlrun</span><span class="o">.</span><span class="n">get_dataitem</span><span class="p">(</span><span class="n">DATA_URL</span><span class="p">)</span><span class="o">.</span><span class="n">as_df</span><span class="p">()</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
<thead>
<tr style="text-align: right;">
<th></th>
<th>sepal length (cm)</th>
<th>sepal width (cm)</th>
<th>petal length (cm)</th>
<th>petal width (cm)</th>
<th>label</th>
</tr>
</thead>
<tbody>
<tr>
<th>0</th>
<td>5.1</td>
<td>3.5</td>
<td>1.4</td>
<td>0.2</td>
<td>0</td>
</tr>
<tr>
<th>1</th>
<td>4.9</td>
<td>3.0</td>
<td>1.4</td>
<td>0.2</td>
<td>0</td>
</tr>
<tr>
<th>2</th>
<td>4.7</td>
<td>3.2</td>
<td>1.3</td>
<td>0.2</td>
<td>0</td>
</tr>
<tr>
<th>3</th>
<td>4.6</td>
<td>3.1</td>
<td>1.5</td>
<td>0.2</td>
<td>0</td>
</tr>
<tr>
<th>4</th>
<td>5.0</td>
<td>3.6</td>
<td>1.4</td>
<td>0.2</td>
<td>0</td>
</tr>
</tbody>
</table>
</div></div></div>
</div>
</div>
<div class="section" id="submit-azure-automl-training-job">
<h2>3. Submit Azure AutoML Training Job<a class="headerlink" href="#submit-azure-automl-training-job" title="Permalink to this headline">¶</a></h2>
<div class="section" id="submit-azure-secrets">
<h3>Submit Azure Secrets<a class="headerlink" href="#submit-azure-secrets" title="Permalink to this headline">¶</a></h3>
<p>For more information about working with secrets see:  <a class="reference external" href="https://docs.mlrun.org/en/latest/secrets.html">MLRun docs: Working with secrets</a></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">dotenv</span> <span class="kn">import</span> <span class="n">dotenv_values</span>
<span class="n">secrets</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">dotenv_values</span><span class="p">(</span><span class="s2">"env"</span><span class="p">))</span>

<span class="n">mlrun</span><span class="o">.</span><span class="n">get_run_db</span><span class="p">()</span><span class="o">.</span><span class="n">create_project_secrets</span><span class="p">(</span>
    <span class="n">project</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
    <span class="n">provider</span><span class="o">=</span><span class="n">mlrun</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">schemas</span><span class="o">.</span><span class="n">SecretProviderName</span><span class="o">.</span><span class="n">kubernetes</span><span class="p">,</span>
    <span class="n">secrets</span><span class="o">=</span><span class="n">secrets</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="import-azureml-utils-from-marketplace">
<h3>Import <code class="docutils literal notranslate"><span class="pre">azureml_utils</span></code> from marketplace<a class="headerlink" href="#import-azureml-utils-from-marketplace" title="Permalink to this headline">¶</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">azureml_fn</span> <span class="o">=</span> <span class="n">mlrun</span><span class="o">.</span><span class="n">import_function</span><span class="p">(</span><span class="s1">'function.yaml'</span><span class="p">)</span>

<span class="n">mlrun</span><span class="o">.</span><span class="n">build_function</span><span class="p">(</span>
    <span class="n">azureml_fn</span><span class="p">,</span> 
    <span class="n">with_mlrun</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> 
    <span class="n">skip_deployed</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> 
    <span class="n">base_image</span><span class="o">=</span><span class="s2">"python:3.7.9-slim"</span><span class="p">,</span> 
    <span class="n">commands</span><span class="o">=</span><span class="p">[</span><span class="s2">"python -m pip install pip==21.2.4"</span><span class="p">,</span> 
              <span class="s2">"apt-get update &amp;&amp; apt-get install -y --no-install-recommends git"</span><span class="p">]</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&gt; 2022-01-26 12:57:37,828 [info] Started building image: .mlrun/func-azureml-yonatan-azureml-utils:latest
<span class="-Color -Color-Cyan">INFO</span>[0000] Retrieving image manifest python:3.7.9-slim  
<span class="-Color -Color-Cyan">INFO</span>[0000] Retrieving image python:3.7.9-slim from registry index.docker.io 
<span class="-Color -Color-Cyan">INFO</span>[0000] Built cross stage deps: map[]                
<span class="-Color -Color-Cyan">INFO</span>[0000] Retrieving image manifest python:3.7.9-slim  
<span class="-Color -Color-Cyan">INFO</span>[0000] Returning cached image manifest              
<span class="-Color -Color-Cyan">INFO</span>[0000] Executing 0 build triggers                   
<span class="-Color -Color-Cyan">INFO</span>[0000] Unpacking rootfs as cmd RUN python -m pip install azureml-core==1.33.0 azureml-train-automl-client==1.33.0 requires it. 
<span class="-Color -Color-Cyan">INFO</span>[0002] RUN python -m pip install azureml-core==1.33.0 azureml-train-automl-client==1.33.0 
<span class="-Color -Color-Cyan">INFO</span>[0002] Taking snapshot of full filesystem...        
<span class="-Color -Color-Cyan">INFO</span>[0003] cmd: /bin/sh                                 
<span class="-Color -Color-Cyan">INFO</span>[0003] args: [-c python -m pip install azureml-core==1.33.0 azureml-train-automl-client==1.33.0] 
<span class="-Color -Color-Cyan">INFO</span>[0003] Running: [/bin/sh -c python -m pip install azureml-core==1.33.0 azureml-train-automl-client==1.33.0] 
Collecting azureml-core==1.33.0
  Downloading azureml_core-1.33.0-py3-none-any.whl (2.2 MB)
Collecting azureml-train-automl-client==1.33.0
  Downloading azureml_train_automl_client-1.33.0-py3-none-any.whl (128 kB)
Collecting SecretStorage&lt;4.0.0
  Downloading SecretStorage-3.3.1-py3-none-any.whl (15 kB)
Collecting PyJWT&lt;3.0.0
  Downloading PyJWT-2.3.0-py3-none-any.whl (16 kB)
Collecting jmespath&lt;1.0.0
  Downloading jmespath-0.10.0-py2.py3-none-any.whl (24 kB)
Collecting msrest&lt;1.0.0,&gt;=0.5.1
  Downloading msrest-0.6.21-py2.py3-none-any.whl (85 kB)
Collecting backports.tempfile
  Downloading backports.tempfile-1.0-py2.py3-none-any.whl (4.4 kB)
Collecting azure-mgmt-keyvault&lt;10.0.0,&gt;=0.40.0
  Downloading azure_mgmt_keyvault-9.3.0-py2.py3-none-any.whl (412 kB)
Collecting adal&lt;=1.2.7,&gt;=1.2.0
  Downloading adal-1.2.7-py2.py3-none-any.whl (55 kB)
Collecting azure-mgmt-storage&lt;16.0.0,&gt;=1.5.0
  Downloading azure_mgmt_storage-11.2.0-py2.py3-none-any.whl (547 kB)
Collecting urllib3&lt;=1.26.5,&gt;=1.23
  Downloading urllib3-1.26.5-py2.py3-none-any.whl (138 kB)
Collecting jsonpickle&lt;3.0.0
  Downloading jsonpickle-2.1.0-py2.py3-none-any.whl (38 kB)
Collecting msrestazure&lt;=0.6.4,&gt;=0.4.33
  Downloading msrestazure-0.6.4-py2.py3-none-any.whl (40 kB)
Collecting requests&lt;3.0.0,&gt;=2.19.1
  Downloading requests-2.27.1-py2.py3-none-any.whl (63 kB)
Collecting pathspec&lt;1.0.0
  Downloading pathspec-0.9.0-py2.py3-none-any.whl (31 kB)
Collecting azure-common&lt;2.0.0,&gt;=1.1.12
  Downloading azure_common-1.1.27-py2.py3-none-any.whl (12 kB)
Collecting pytz
  Downloading pytz-2021.3-py2.py3-none-any.whl (503 kB)
Collecting azure-graphrbac&lt;1.0.0,&gt;=0.40.0
  Downloading azure_graphrbac-0.61.1-py2.py3-none-any.whl (141 kB)
Collecting cryptography!=1.9,!=2.0.*,!=2.1.*,!=2.2.*,&lt;4.0.0
  Downloading cryptography-3.4.8-cp36-abi3-manylinux_2_24_x86_64.whl (3.0 MB)
Collecting azure-mgmt-authorization&lt;1.0.0,&gt;=0.40.0
  Downloading azure_mgmt_authorization-0.61.0-py2.py3-none-any.whl (94 kB)
Collecting docker&lt;5.0.0
  Downloading docker-4.4.4-py2.py3-none-any.whl (147 kB)
Collecting contextlib2&lt;1.0.0
  Downloading contextlib2-0.6.0.post1-py2.py3-none-any.whl (9.8 kB)
Collecting azure-mgmt-resource&lt;15.0.0,&gt;=1.2.1
  Downloading azure_mgmt_resource-13.0.0-py2.py3-none-any.whl (1.3 MB)
Collecting ndg-httpsclient&lt;=0.5.1
  Downloading ndg_httpsclient-0.5.1-py3-none-any.whl (34 kB)
Collecting python-dateutil&lt;3.0.0,&gt;=2.7.3
  Downloading python_dateutil-2.8.2-py2.py3-none-any.whl (247 kB)
Collecting pyopenssl&lt;21.0.0
  Downloading pyOpenSSL-20.0.1-py2.py3-none-any.whl (54 kB)
Collecting ruamel.yaml&lt;0.17.5,&gt;=0.15.35
  Downloading ruamel.yaml-0.17.4-py3-none-any.whl (101 kB)
Collecting azure-mgmt-containerregistry&gt;=2.0.0
  Downloading azure_mgmt_containerregistry-9.0.0-py3-none-any.whl (937 kB)
Collecting azureml-dataset-runtime~=1.33.0
  Downloading azureml_dataset_runtime-1.33.0-py3-none-any.whl (3.5 kB)
Collecting azureml-automl-core~=1.33.0
  Downloading azureml_automl_core-1.33.1-py3-none-any.whl (214 kB)
Collecting azureml-telemetry~=1.33.0
  Downloading azureml_telemetry-1.33.0-py3-none-any.whl (30 kB)
Collecting azure-mgmt-core&lt;2.0.0,&gt;=1.3.0
  Downloading azure_mgmt_core-1.3.0-py2.py3-none-any.whl (25 kB)
Collecting azure-core&lt;2.0.0,&gt;=1.15.0
  Downloading azure_core-1.21.1-py2.py3-none-any.whl (178 kB)
Collecting six&gt;=1.11.0
  Downloading six-1.16.0-py2.py3-none-any.whl (11 kB)
Collecting numpy!=1.19.3
  Downloading numpy-1.21.5-cp37-cp37m-manylinux_2_12_x86_64.manylinux2010_x86_64.whl (15.7 MB)
Collecting pyarrow&lt;4.0.0,&gt;=0.17.0
  Downloading pyarrow-3.0.0-cp37-cp37m-manylinux2014_x86_64.whl (20.7 MB)
Collecting azureml-dataprep&lt;2.21.0a,&gt;=2.20.0a
  Downloading azureml_dataprep-2.20.1-py3-none-any.whl (39.4 MB)
Collecting azureml-dataprep-native&lt;39.0.0,&gt;=38.0.0
  Downloading azureml_dataprep_native-38.0.0-cp37-cp37m-manylinux1_x86_64.whl (1.3 MB)
Collecting dotnetcore2&lt;3.0.0,&gt;=2.1.14
  Downloading dotnetcore2-2.1.22-py3-none-manylinux1_x86_64.whl (29.3 MB)
Collecting cloudpickle&lt;2.0.0,&gt;=1.1.0
  Downloading cloudpickle-1.6.0-py3-none-any.whl (23 kB)
Collecting azure-identity&lt;1.5.0,&gt;=1.2.0
  Downloading azure_identity-1.4.1-py2.py3-none-any.whl (86 kB)
Collecting azureml-dataprep-rslex&lt;1.19.0a,&gt;=1.18.0dev0
  Downloading azureml_dataprep_rslex-1.18.2-cp37-cp37m-manylinux1_x86_64.whl (10.4 MB)
Collecting msal-extensions~=0.2.2
  Downloading msal_extensions-0.2.2-py2.py3-none-any.whl (15 kB)
Collecting msal&lt;2.0.0,&gt;=1.3.0
  Downloading msal-1.16.0-py2.py3-none-any.whl (78 kB)
Collecting applicationinsights
  Downloading applicationinsights-0.11.10-py2.py3-none-any.whl (55 kB)
Collecting cffi&gt;=1.12
  Downloading cffi-1.15.0-cp37-cp37m-manylinux_2_12_x86_64.manylinux2010_x86_64.whl (427 kB)
Collecting pycparser
  Downloading pycparser-2.21-py2.py3-none-any.whl (118 kB)
Collecting websocket-client&gt;=0.32.0
  Downloading websocket_client-1.2.3-py3-none-any.whl (53 kB)
Collecting distro&gt;=1.2.0
  Downloading distro-1.6.0-py2.py3-none-any.whl (19 kB)
Collecting importlib-metadata
  Downloading importlib_metadata-4.10.1-py3-none-any.whl (17 kB)
Collecting portalocker~=1.0
  Downloading portalocker-1.7.1-py2.py3-none-any.whl (10 kB)
Collecting isodate&gt;=0.6.0
  Downloading isodate-0.6.1-py2.py3-none-any.whl (41 kB)
Collecting certifi&gt;=2017.4.17
  Downloading certifi-2021.10.8-py2.py3-none-any.whl (149 kB)
Collecting requests-oauthlib&gt;=0.5.0
  Downloading requests_oauthlib-1.3.0-py2.py3-none-any.whl (23 kB)
Collecting pyasn1&gt;=0.1.1
  Downloading pyasn1-0.4.8-py2.py3-none-any.whl (77 kB)
Collecting idna&lt;4,&gt;=2.5
  Downloading idna-3.3-py3-none-any.whl (61 kB)
Collecting charset-normalizer~=2.0.0
  Downloading charset_normalizer-2.0.10-py3-none-any.whl (39 kB)
Collecting oauthlib&gt;=3.0.0
  Downloading oauthlib-3.1.1-py2.py3-none-any.whl (146 kB)
Collecting ruamel.yaml.clib&gt;=0.1.2
  Downloading ruamel.yaml.clib-0.2.6-cp37-cp37m-manylinux1_x86_64.whl (546 kB)
Collecting jeepney&gt;=0.6
  Downloading jeepney-0.7.1-py3-none-any.whl (54 kB)
Collecting backports.weakref
  Downloading backports.weakref-1.0.post1-py2.py3-none-any.whl (5.2 kB)
Collecting typing-extensions&gt;=3.6.4
  Downloading typing_extensions-4.0.1-py3-none-any.whl (22 kB)
Collecting zipp&gt;=0.5
  Downloading zipp-3.7.0-py3-none-any.whl (5.3 kB)
Installing collected packages: pycparser, urllib3, idna, charset-normalizer, cffi, certifi, six, requests, PyJWT, oauthlib, cryptography, requests-oauthlib, python-dateutil, isodate, zipp, typing-extensions, portalocker, msrest, msal, azure-core, adal, websocket-client, ruamel.yaml.clib, pyopenssl, pyasn1, msrestazure, msal-extensions, jeepney, importlib-metadata, distro, backports.weakref, azure-mgmt-core, azure-common, SecretStorage, ruamel.yaml, pytz, pathspec, numpy, ndg-httpsclient, jsonpickle, jmespath, dotnetcore2, docker, contextlib2, cloudpickle, backports.tempfile, azureml-dataprep-rslex, azureml-dataprep-native, azure-mgmt-storage, azure-mgmt-resource, azure-mgmt-keyvault, azure-mgmt-containerregistry, azure-mgmt-authorization, azure-identity, azure-graphrbac, pyarrow, azureml-dataprep, azureml-core, applicationinsights, azureml-telemetry, azureml-dataset-runtime, azureml-automl-core, azureml-train-automl-client
Successfully installed PyJWT-2.3.0 SecretStorage-3.3.1 adal-1.2.7 applicationinsights-0.11.10 azure-common-1.1.27 azure-core-1.21.1 azure-graphrbac-0.61.1 azure-identity-1.4.1 azure-mgmt-authorization-0.61.0 azure-mgmt-containerregistry-9.0.0 azure-mgmt-core-1.3.0 azure-mgmt-keyvault-9.3.0 azure-mgmt-resource-13.0.0 azure-mgmt-storage-11.2.0 azureml-automl-core-1.33.1 azureml-core-1.33.0 azureml-dataprep-2.20.1 azureml-dataprep-native-38.0.0 azureml-dataprep-rslex-1.18.2 azureml-dataset-runtime-1.33.0 azureml-telemetry-1.33.0 azureml-train-automl-client-1.33.0 backports.tempfile-1.0 backports.weakref-1.0.post1 certifi-2021.10.8 cffi-1.15.0 charset-normalizer-2.0.10 cloudpickle-1.6.0 contextlib2-0.6.0.post1 cryptography-3.4.8 distro-1.6.0 docker-4.4.4 dotnetcore2-2.1.22 idna-3.3 importlib-metadata-4.10.1 isodate-0.6.1 jeepney-0.7.1 jmespath-0.10.0 jsonpickle-2.1.0 msal-1.16.0 msal-extensions-0.2.2 msrest-0.6.21 msrestazure-0.6.4 ndg-httpsclient-0.5.1 numpy-1.21.5 oauthlib-3.1.1 pathspec-0.9.0 portalocker-1.7.1 pyarrow-3.0.0 pyasn1-0.4.8 pycparser-2.21 pyopenssl-20.0.1 python-dateutil-2.8.2 pytz-2021.3 requests-2.27.1 requests-oauthlib-1.3.0 ruamel.yaml-0.17.4 ruamel.yaml.clib-0.2.6 six-1.16.0 typing-extensions-4.0.1 urllib3-1.26.5 websocket-client-1.2.3 zipp-3.7.0
WARNING: You are using pip version 21.0.1; however, version 21.3.1 is available.
You should consider upgrading via the '/usr/local/bin/python -m pip install --upgrade pip' command.
<span class="-Color -Color-Cyan">INFO</span>[0026] Taking snapshot of full filesystem...        
<span class="-Color -Color-Cyan">INFO</span>[0038] RUN python -m pip install pip==21.2.4        
<span class="-Color -Color-Cyan">INFO</span>[0038] cmd: /bin/sh                                 
<span class="-Color -Color-Cyan">INFO</span>[0038] args: [-c python -m pip install pip==21.2.4] 
<span class="-Color -Color-Cyan">INFO</span>[0038] Running: [/bin/sh -c python -m pip install pip==21.2.4] 
Collecting pip==21.2.4
  Downloading pip-21.2.4-py3-none-any.whl (1.6 MB)
Installing collected packages: pip
  Attempting uninstall: pip
    Found existing installation: pip 21.0.1
    Uninstalling pip-21.0.1:
      Successfully uninstalled pip-21.0.1
Successfully installed pip-21.2.4
<span class="-Color -Color-Cyan">INFO</span>[0040] Taking snapshot of full filesystem...        
<span class="-Color -Color-Cyan">INFO</span>[0041] RUN apt-get update &amp;&amp; apt-get install -y --no-install-recommends git 
<span class="-Color -Color-Cyan">INFO</span>[0041] cmd: /bin/sh                                 
<span class="-Color -Color-Cyan">INFO</span>[0041] args: [-c apt-get update &amp;&amp; apt-get install -y --no-install-recommends git] 
<span class="-Color -Color-Cyan">INFO</span>[0041] Running: [/bin/sh -c apt-get update &amp;&amp; apt-get install -y --no-install-recommends git] 
Get:1 http://deb.debian.org/debian buster InRelease [122 kB]
Get:2 http://security.debian.org/debian-security buster/updates InRelease [65.4 kB]
Get:3 http://deb.debian.org/debian buster-updates InRelease [51.9 kB]
Get:4 http://security.debian.org/debian-security buster/updates/main amd64 Packages [313 kB]
Get:5 http://deb.debian.org/debian buster/main amd64 Packages [7906 kB]
Get:6 http://deb.debian.org/debian buster-updates/main amd64 Packages [8792 B]
Fetched 8467 kB in 1s (5764 kB/s)
Reading package lists...
Reading package lists...
Building dependency tree...
Reading state information...
The following additional packages will be installed:
  git-man libcurl3-gnutls liberror-perl libgdbm-compat4 libgssapi-krb5-2
  libk5crypto3 libkeyutils1 libkrb5-3 libkrb5support0 libldap-2.4-2
  libldap-common libnghttp2-14 libpcre2-8-0 libperl5.28 libpsl5 librtmp1
  libsasl2-2 libsasl2-modules-db libssh2-1 perl perl-modules-5.28
Suggested packages:
  gettext-base git-daemon-run | git-daemon-sysvinit git-doc git-el git-email
  git-gui gitk gitweb git-cvs git-mediawiki git-svn krb5-doc krb5-user
  sensible-utils perl-doc libterm-readline-gnu-perl
  | libterm-readline-perl-perl make libb-debug-perl liblocale-codes-perl
Recommended packages:
  patch less ssh-client krb5-locales publicsuffix libsasl2-modules
The following NEW packages will be installed:
  git git-man libcurl3-gnutls liberror-perl libgdbm-compat4 libgssapi-krb5-2
  libk5crypto3 libkeyutils1 libkrb5-3 libkrb5support0 libldap-2.4-2
  libldap-common libnghttp2-14 libpcre2-8-0 libperl5.28 libpsl5 librtmp1
  libsasl2-2 libsasl2-modules-db libssh2-1 perl perl-modules-5.28
0 upgraded, 22 newly installed, 0 to remove and 16 not upgraded.
Need to get 16.4 MB of archives.
After this operation, 90.1 MB of additional disk space will be used.
Get:1 http://deb.debian.org/debian buster/main amd64 perl-modules-5.28 all 5.28.1-6+deb10u1 [2873 kB]
Get:2 http://deb.debian.org/debian buster/main amd64 libgdbm-compat4 amd64 1.18.1-4 [44.1 kB]
Get:3 http://deb.debian.org/debian buster/main amd64 libperl5.28 amd64 5.28.1-6+deb10u1 [3894 kB]
Get:4 http://deb.debian.org/debian buster/main amd64 perl amd64 5.28.1-6+deb10u1 [204 kB]
Get:5 http://deb.debian.org/debian buster/main amd64 libkeyutils1 amd64 1.6-6 [15.0 kB]
Get:6 http://deb.debian.org/debian buster/main amd64 libkrb5support0 amd64 1.17-3+deb10u3 [65.8 kB]
Get:7 http://deb.debian.org/debian buster/main amd64 libk5crypto3 amd64 1.17-3+deb10u3 [122 kB]
Get:8 http://deb.debian.org/debian buster/main amd64 libkrb5-3 amd64 1.17-3+deb10u3 [370 kB]
Get:9 http://deb.debian.org/debian buster/main amd64 libgssapi-krb5-2 amd64 1.17-3+deb10u3 [158 kB]
Get:10 http://deb.debian.org/debian buster/main amd64 libsasl2-modules-db amd64 2.1.27+dfsg-1+deb10u1 [69.1 kB]
Get:11 http://deb.debian.org/debian buster/main amd64 libsasl2-2 amd64 2.1.27+dfsg-1+deb10u1 [106 kB]
Get:12 http://deb.debian.org/debian buster/main amd64 libldap-common all 2.4.47+dfsg-3+deb10u6 [90.0 kB]
Get:13 http://deb.debian.org/debian buster/main amd64 libldap-2.4-2 amd64 2.4.47+dfsg-3+deb10u6 [224 kB]
Get:14 http://deb.debian.org/debian buster/main amd64 libnghttp2-14 amd64 1.36.0-2+deb10u1 [85.0 kB]
Get:15 http://deb.debian.org/debian buster/main amd64 libpsl5 amd64 0.20.2-2 [53.7 kB]
Get:16 http://deb.debian.org/debian buster/main amd64 librtmp1 amd64 2.4+20151223.gitfa8646d.1-2 [60.5 kB]
Get:17 http://deb.debian.org/debian buster/main amd64 libssh2-1 amd64 1.8.0-2.1 [140 kB]
Get:18 http://deb.debian.org/debian buster/main amd64 libcurl3-gnutls amd64 7.64.0-4+deb10u2 [330 kB]
Get:19 http://deb.debian.org/debian buster/main amd64 libpcre2-8-0 amd64 10.32-5 [213 kB]
Get:20 http://deb.debian.org/debian buster/main amd64 liberror-perl all 0.17027-2 [30.9 kB]
Get:21 http://deb.debian.org/debian buster/main amd64 git-man all 1:2.20.1-2+deb10u3 [1620 kB]
Get:22 http://deb.debian.org/debian buster/main amd64 git amd64 1:2.20.1-2+deb10u3 [5633 kB]
debconf: delaying package configuration, since apt-utils is not installed
Fetched 16.4 MB in 0s (59.7 MB/s)
Selecting previously unselected package perl-modules-5.28.
(Reading database ... 6840 files and directories currently installed.)
Preparing to unpack .../00-perl-modules-5.28_5.28.1-6+deb10u1_all.deb ...
Unpacking perl-modules-5.28 (5.28.1-6+deb10u1) ...
Selecting previously unselected package libgdbm-compat4:amd64.
Preparing to unpack .../01-libgdbm-compat4_1.18.1-4_amd64.deb ...
Unpacking libgdbm-compat4:amd64 (1.18.1-4) ...
Selecting previously unselected package libperl5.28:amd64.
Preparing to unpack .../02-libperl5.28_5.28.1-6+deb10u1_amd64.deb ...
Unpacking libperl5.28:amd64 (5.28.1-6+deb10u1) ...
Selecting previously unselected package perl.
Preparing to unpack .../03-perl_5.28.1-6+deb10u1_amd64.deb ...
Unpacking perl (5.28.1-6+deb10u1) ...
Selecting previously unselected package libkeyutils1:amd64.
Preparing to unpack .../04-libkeyutils1_1.6-6_amd64.deb ...
Unpacking libkeyutils1:amd64 (1.6-6) ...
Selecting previously unselected package libkrb5support0:amd64.
Preparing to unpack .../05-libkrb5support0_1.17-3+deb10u3_amd64.deb ...
Unpacking libkrb5support0:amd64 (1.17-3+deb10u3) ...
Selecting previously unselected package libk5crypto3:amd64.
Preparing to unpack .../06-libk5crypto3_1.17-3+deb10u3_amd64.deb ...
Unpacking libk5crypto3:amd64 (1.17-3+deb10u3) ...
Selecting previously unselected package libkrb5-3:amd64.
Preparing to unpack .../07-libkrb5-3_1.17-3+deb10u3_amd64.deb ...
Unpacking libkrb5-3:amd64 (1.17-3+deb10u3) ...
Selecting previously unselected package libgssapi-krb5-2:amd64.
Preparing to unpack .../08-libgssapi-krb5-2_1.17-3+deb10u3_amd64.deb ...
Unpacking libgssapi-krb5-2:amd64 (1.17-3+deb10u3) ...
Selecting previously unselected package libsasl2-modules-db:amd64.
Preparing to unpack .../09-libsasl2-modules-db_2.1.27+dfsg-1+deb10u1_amd64.deb ...
Unpacking libsasl2-modules-db:amd64 (2.1.27+dfsg-1+deb10u1) ...
Selecting previously unselected package libsasl2-2:amd64.
Preparing to unpack .../10-libsasl2-2_2.1.27+dfsg-1+deb10u1_amd64.deb ...
Unpacking libsasl2-2:amd64 (2.1.27+dfsg-1+deb10u1) ...
Selecting previously unselected package libldap-common.
Preparing to unpack .../11-libldap-common_2.4.47+dfsg-3+deb10u6_all.deb ...
Unpacking libldap-common (2.4.47+dfsg-3+deb10u6) ...
Selecting previously unselected package libldap-2.4-2:amd64.
Preparing to unpack .../12-libldap-2.4-2_2.4.47+dfsg-3+deb10u6_amd64.deb ...
Unpacking libldap-2.4-2:amd64 (2.4.47+dfsg-3+deb10u6) ...
Selecting previously unselected package libnghttp2-14:amd64.
Preparing to unpack .../13-libnghttp2-14_1.36.0-2+deb10u1_amd64.deb ...
Unpacking libnghttp2-14:amd64 (1.36.0-2+deb10u1) ...
Selecting previously unselected package libpsl5:amd64.
Preparing to unpack .../14-libpsl5_0.20.2-2_amd64.deb ...
Unpacking libpsl5:amd64 (0.20.2-2) ...
Selecting previously unselected package librtmp1:amd64.
Preparing to unpack .../15-librtmp1_2.4+20151223.gitfa8646d.1-2_amd64.deb ...
Unpacking librtmp1:amd64 (2.4+20151223.gitfa8646d.1-2) ...
Selecting previously unselected package libssh2-1:amd64.
Preparing to unpack .../16-libssh2-1_1.8.0-2.1_amd64.deb ...
Unpacking libssh2-1:amd64 (1.8.0-2.1) ...
Selecting previously unselected package libcurl3-gnutls:amd64.
Preparing to unpack .../17-libcurl3-gnutls_7.64.0-4+deb10u2_amd64.deb ...
Unpacking libcurl3-gnutls:amd64 (7.64.0-4+deb10u2) ...
Selecting previously unselected package libpcre2-8-0:amd64.
Preparing to unpack .../18-libpcre2-8-0_10.32-5_amd64.deb ...
Unpacking libpcre2-8-0:amd64 (10.32-5) ...
Selecting previously unselected package liberror-perl.
Preparing to unpack .../19-liberror-perl_0.17027-2_all.deb ...
Unpacking liberror-perl (0.17027-2) ...
Selecting previously unselected package git-man.
Preparing to unpack .../20-git-man_1%3a2.20.1-2+deb10u3_all.deb ...
Unpacking git-man (1:2.20.1-2+deb10u3) ...
Selecting previously unselected package git.
Preparing to unpack .../21-git_1%3a2.20.1-2+deb10u3_amd64.deb ...
Unpacking git (1:2.20.1-2+deb10u3) ...
Setting up perl-modules-5.28 (5.28.1-6+deb10u1) ...
Setting up libkeyutils1:amd64 (1.6-6) ...
Setting up libpsl5:amd64 (0.20.2-2) ...
Setting up libnghttp2-14:amd64 (1.36.0-2+deb10u1) ...
Setting up libldap-common (2.4.47+dfsg-3+deb10u6) ...
Setting up libkrb5support0:amd64 (1.17-3+deb10u3) ...
Setting up libsasl2-modules-db:amd64 (2.1.27+dfsg-1+deb10u1) ...
Setting up librtmp1:amd64 (2.4+20151223.gitfa8646d.1-2) ...
Setting up libgdbm-compat4:amd64 (1.18.1-4) ...
Setting up libpcre2-8-0:amd64 (10.32-5) ...
Setting up libk5crypto3:amd64 (1.17-3+deb10u3) ...
Setting up libsasl2-2:amd64 (2.1.27+dfsg-1+deb10u1) ...
Setting up libperl5.28:amd64 (5.28.1-6+deb10u1) ...
Setting up git-man (1:2.20.1-2+deb10u3) ...
Setting up libssh2-1:amd64 (1.8.0-2.1) ...
Setting up libkrb5-3:amd64 (1.17-3+deb10u3) ...
Setting up libldap-2.4-2:amd64 (2.4.47+dfsg-3+deb10u6) ...
Setting up perl (5.28.1-6+deb10u1) ...
Setting up libgssapi-krb5-2:amd64 (1.17-3+deb10u3) ...
Setting up libcurl3-gnutls:amd64 (7.64.0-4+deb10u2) ...
Setting up liberror-perl (0.17027-2) ...
Setting up git (1:2.20.1-2+deb10u3) ...
Processing triggers for libc-bin (2.28-10) ...
<span class="-Color -Color-Cyan">INFO</span>[0047] Taking snapshot of full filesystem...        
<span class="-Color -Color-Cyan">INFO</span>[0050] RUN python -m pip install "mlrun[complete]==0.10.0-rc4" 
<span class="-Color -Color-Cyan">INFO</span>[0050] cmd: /bin/sh                                 
<span class="-Color -Color-Cyan">INFO</span>[0050] args: [-c python -m pip install "mlrun[complete]==0.10.0-rc4"] 
<span class="-Color -Color-Cyan">INFO</span>[0050] Running: [/bin/sh -c python -m pip install "mlrun[complete]==0.10.0-rc4"] 
Collecting mlrun[complete]==0.10.0-rc4
  Downloading mlrun-0.10.0rc4-py3-none-any.whl (750 kB)
Collecting aiohttp&lt;3.8,&gt;=3.6
  Downloading aiohttp-3.7.4.post0-cp37-cp37m-manylinux2014_x86_64.whl (1.3 MB)
Collecting mergedeep~=1.3
  Downloading mergedeep-1.3.4-py3-none-any.whl (6.4 kB)
Requirement already satisfied: numpy&lt;1.22.0,&gt;=1.16.5 in /usr/local/lib/python3.7/site-packages (from mlrun[complete]==0.10.0-rc4) (1.21.5)
Collecting alembic&lt;1.6.0,~=1.4
  Downloading alembic-1.5.8-py2.py3-none-any.whl (159 kB)
Requirement already satisfied: requests~=2.22 in /usr/local/lib/python3.7/site-packages (from mlrun[complete]==0.10.0-rc4) (2.27.1)
Collecting distributed&lt;3,&gt;=2.23
  Downloading distributed-2.30.1-py3-none-any.whl (656 kB)
Collecting fastapi~=0.67.0
  Downloading fastapi-0.67.0-py3-none-any.whl (51 kB)
Collecting deepdiff~=5.0
  Downloading deepdiff-5.7.0-py3-none-any.whl (68 kB)
Collecting ipython&lt;7.17,~=7.0
  Downloading ipython-7.16.3-py3-none-any.whl (783 kB)
Collecting orjson&lt;3.4,&gt;=3
  Downloading orjson-3.3.1-cp37-cp37m-manylinux2014_x86_64.whl (208 kB)
Collecting pydantic~=1.5
  Downloading pydantic-1.9.0-cp37-cp37m-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (10.9 MB)
Collecting nuclio-jupyter~=0.8.22
  Downloading nuclio_jupyter-0.8.22-py3-none-any.whl (49 kB)
Collecting chardet&lt;4.0,&gt;=3.0.2
  Downloading chardet-3.0.4-py2.py3-none-any.whl (133 kB)
Collecting tabulate&lt;=0.8.3,&gt;=0.8.0
  Downloading tabulate-0.8.3.tar.gz (46 kB)
Requirement already satisfied: pyarrow&lt;6,&gt;=1 in /usr/local/lib/python3.7/site-packages (from mlrun[complete]==0.10.0-rc4) (3.0.0)
Collecting storey~=0.10.3
  Downloading storey-0.10.4-py3-none-any.whl (116 kB)
Collecting pymysql~=1.0
  Downloading PyMySQL-1.0.2-py3-none-any.whl (43 kB)
Collecting kubernetes~=11.0
  Downloading kubernetes-11.0.0-py3-none-any.whl (1.5 MB)
Collecting click~=7.0
  Downloading click-7.1.2-py2.py3-none-any.whl (82 kB)
Collecting GitPython~=3.0
  Downloading GitPython-3.1.26-py3-none-any.whl (180 kB)
Collecting kfp~=1.0.1
  Downloading kfp-1.0.4.tar.gz (116 kB)
Collecting fsspec~=2021.8.1
  Downloading fsspec-2021.8.1-py3-none-any.whl (119 kB)
Collecting ipykernel~=5.0
  Downloading ipykernel-5.5.6-py3-none-any.whl (121 kB)
Collecting pyyaml~=5.1
  Downloading PyYAML-5.4.1-cp37-cp37m-manylinux1_x86_64.whl (636 kB)
Collecting v3io~=0.5.13
  Downloading v3io-0.5.15-py3-none-any.whl (49 kB)
Collecting cryptography&lt;3.4,~=3.0
  Downloading cryptography-3.3.2-cp36-abi3-manylinux2010_x86_64.whl (2.6 MB)
Collecting dask~=2.12
  Downloading dask-2.30.0-py3-none-any.whl (848 kB)
Collecting humanfriendly~=8.2
  Downloading humanfriendly-8.2-py2.py3-none-any.whl (86 kB)
Collecting v3iofs~=0.1.7
  Downloading v3iofs-0.1.9-py3-none-any.whl (12 kB)
Collecting v3io-frames~=0.10.2
  Downloading v3io_frames-0.10.2-py3-none-any.whl (35 kB)
Collecting inflection~=0.5.0
  Downloading inflection-0.5.1-py2.py3-none-any.whl (9.5 kB)
Collecting nest-asyncio~=1.0
  Downloading nest_asyncio-1.5.4-py3-none-any.whl (5.1 kB)
Collecting sqlalchemy~=1.3
  Downloading SQLAlchemy-1.4.31-cp37-cp37m-manylinux_2_5_x86_64.manylinux1_x86_64.manylinux_2_17_x86_64.manylinux2014_x86_64.whl (1.6 MB)
Requirement already satisfied: urllib3&lt;1.27,&gt;=1.25.4 in /usr/local/lib/python3.7/site-packages (from mlrun[complete]==0.10.0-rc4) (1.26.5)
Collecting semver~=2.13
  Downloading semver-2.13.0-py2.py3-none-any.whl (12 kB)
Collecting pandas~=1.2
  Downloading pandas-1.3.5-cp37-cp37m-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (11.3 MB)
Collecting google-auth&lt;2.0dev,&gt;=1.25.0
  Downloading google_auth-1.35.0-py2.py3-none-any.whl (152 kB)
Collecting plotly~=5.4
  Downloading plotly-5.5.0-py2.py3-none-any.whl (26.5 MB)
Collecting azure-storage-blob~=12.0
  Downloading azure_storage_blob-12.9.0-py2.py3-none-any.whl (356 kB)
Collecting botocore&lt;1.20.107,&gt;=1.20.106
  Downloading botocore-1.20.106-py2.py3-none-any.whl (7.7 MB)
Collecting boto3&lt;1.17.107,~=1.9
  Downloading boto3-1.17.106-py2.py3-none-any.whl (131 kB)
Collecting bokeh~=2.3.0
  Downloading bokeh-2.3.3.tar.gz (10.7 MB)
Collecting aiobotocore~=1.4.0
  Downloading aiobotocore-1.4.2.tar.gz (52 kB)
Collecting azure-identity~=1.5
  Downloading azure_identity-1.7.1-py2.py3-none-any.whl (129 kB)
Collecting s3fs~=2021.8.1
  Downloading s3fs-2021.8.1-py3-none-any.whl (26 kB)
Collecting azure-keyvault-secrets~=4.2
  Downloading azure_keyvault_secrets-4.3.0-py2.py3-none-any.whl (233 kB)
Collecting gcsfs~=2021.8.1
  Downloading gcsfs-2021.8.1-py2.py3-none-any.whl (23 kB)
Collecting adlfs~=2021.8.1
  Downloading adlfs-2021.8.2.tar.gz (38 kB)
Requirement already satisfied: azure-core&gt;=1.7.0 in /usr/local/lib/python3.7/site-packages (from adlfs~=2021.8.1-&gt;mlrun[complete]==0.10.0-rc4) (1.21.1)
Collecting azure-datalake-store&lt;0.1,&gt;=0.0.46
  Downloading azure_datalake_store-0.0.52-py2.py3-none-any.whl (61 kB)
Collecting wrapt&gt;=1.10.10
  Downloading wrapt-1.13.3-cp37-cp37m-manylinux_2_5_x86_64.manylinux1_x86_64.manylinux_2_12_x86_64.manylinux2010_x86_64.whl (79 kB)
Collecting aioitertools&gt;=0.5.1
  Downloading aioitertools-0.8.0-py3-none-any.whl (21 kB)
Collecting multidict&lt;7.0,&gt;=4.5
  Downloading multidict-6.0.2-cp37-cp37m-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (94 kB)
Requirement already satisfied: typing-extensions&gt;=3.6.5 in /usr/local/lib/python3.7/site-packages (from aiohttp&lt;3.8,&gt;=3.6-&gt;mlrun[complete]==0.10.0-rc4) (4.0.1)
Collecting async-timeout&lt;4.0,&gt;=3.0
  Downloading async_timeout-3.0.1-py3-none-any.whl (8.2 kB)
Collecting yarl&lt;2.0,&gt;=1.0
  Downloading yarl-1.7.2-cp37-cp37m-manylinux_2_5_x86_64.manylinux1_x86_64.manylinux_2_12_x86_64.manylinux2010_x86_64.whl (271 kB)
Collecting attrs&gt;=17.3.0
  Downloading attrs-21.4.0-py2.py3-none-any.whl (60 kB)
Collecting python-editor&gt;=0.3
  Downloading python_editor-1.0.4-py3-none-any.whl (4.9 kB)
Collecting Mako
  Downloading Mako-1.1.6-py2.py3-none-any.whl (75 kB)
Requirement already satisfied: python-dateutil in /usr/local/lib/python3.7/site-packages (from alembic&lt;1.6.0,~=1.4-&gt;mlrun[complete]==0.10.0-rc4) (2.8.2)
Requirement already satisfied: six&gt;=1.11.0 in /usr/local/lib/python3.7/site-packages (from azure-core&gt;=1.7.0-&gt;adlfs~=2021.8.1-&gt;mlrun[complete]==0.10.0-rc4) (1.16.0)
Requirement already satisfied: cffi in /usr/local/lib/python3.7/site-packages (from azure-datalake-store&lt;0.1,&gt;=0.0.46-&gt;adlfs~=2021.8.1-&gt;mlrun[complete]==0.10.0-rc4) (1.15.0)
Requirement already satisfied: adal&gt;=0.4.2 in /usr/local/lib/python3.7/site-packages (from azure-datalake-store&lt;0.1,&gt;=0.0.46-&gt;adlfs~=2021.8.1-&gt;mlrun[complete]==0.10.0-rc4) (1.2.7)
Requirement already satisfied: PyJWT&lt;3,&gt;=1.0.0 in /usr/local/lib/python3.7/site-packages (from adal&gt;=0.4.2-&gt;azure-datalake-store&lt;0.1,&gt;=0.0.46-&gt;adlfs~=2021.8.1-&gt;mlrun[complete]==0.10.0-rc4) (2.3.0)
Requirement already satisfied: msal&lt;2.0.0,&gt;=1.12.0 in /usr/local/lib/python3.7/site-packages (from azure-identity~=1.5-&gt;mlrun[complete]==0.10.0-rc4) (1.16.0)
Collecting msal-extensions~=0.3.0
  Downloading msal_extensions-0.3.1-py2.py3-none-any.whl (18 kB)
Requirement already satisfied: msrest&gt;=0.6.21 in /usr/local/lib/python3.7/site-packages (from azure-keyvault-secrets~=4.2-&gt;mlrun[complete]==0.10.0-rc4) (0.6.21)
Requirement already satisfied: azure-common~=1.1 in /usr/local/lib/python3.7/site-packages (from azure-keyvault-secrets~=4.2-&gt;mlrun[complete]==0.10.0-rc4) (1.1.27)
Collecting Jinja2&gt;=2.9
  Downloading Jinja2-3.0.3-py3-none-any.whl (133 kB)
Collecting pillow&gt;=7.1.0
  Downloading Pillow-9.0.0-cp37-cp37m-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (4.3 MB)
Collecting packaging&gt;=16.8
  Downloading packaging-21.3-py3-none-any.whl (40 kB)
Collecting tornado&gt;=5.1
  Downloading tornado-6.1-cp37-cp37m-manylinux2010_x86_64.whl (428 kB)
Requirement already satisfied: jmespath&lt;1.0.0,&gt;=0.7.1 in /usr/local/lib/python3.7/site-packages (from boto3&lt;1.17.107,~=1.9-&gt;mlrun[complete]==0.10.0-rc4) (0.10.0)
Collecting s3transfer&lt;0.5.0,&gt;=0.4.0
  Downloading s3transfer-0.4.2-py2.py3-none-any.whl (79 kB)
Requirement already satisfied: pycparser in /usr/local/lib/python3.7/site-packages (from cffi-&gt;azure-datalake-store&lt;0.1,&gt;=0.0.46-&gt;adlfs~=2021.8.1-&gt;mlrun[complete]==0.10.0-rc4) (2.21)
Collecting ordered-set==4.0.2
  Downloading ordered-set-4.0.2.tar.gz (10 kB)
Collecting zict&gt;=0.1.3
  Downloading zict-2.0.0-py3-none-any.whl (10 kB)
Collecting tblib&gt;=1.6.0
  Downloading tblib-1.7.0-py2.py3-none-any.whl (12 kB)
Collecting sortedcontainers!=2.0.0,!=2.0.1
  Downloading sortedcontainers-2.4.0-py2.py3-none-any.whl (29 kB)
Requirement already satisfied: cloudpickle&gt;=1.5.0 in /usr/local/lib/python3.7/site-packages (from distributed&lt;3,&gt;=2.23-&gt;mlrun[complete]==0.10.0-rc4) (1.6.0)
Requirement already satisfied: setuptools in /usr/local/lib/python3.7/site-packages (from distributed&lt;3,&gt;=2.23-&gt;mlrun[complete]==0.10.0-rc4) (53.0.0)
Collecting toolz&gt;=0.8.2
  Downloading toolz-0.11.2-py3-none-any.whl (55 kB)
Collecting psutil&gt;=5.0
  Downloading psutil-5.9.0-cp37-cp37m-manylinux_2_12_x86_64.manylinux2010_x86_64.manylinux_2_17_x86_64.manylinux2014_x86_64.whl (280 kB)
Collecting msgpack&gt;=0.6.0
  Downloading msgpack-1.0.3-cp37-cp37m-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (299 kB)
Collecting starlette==0.14.2
  Downloading starlette-0.14.2-py3-none-any.whl (60 kB)
Collecting decorator
  Downloading decorator-5.1.1-py3-none-any.whl (9.1 kB)
Collecting google-auth-oauthlib
  Downloading google_auth_oauthlib-0.4.6-py2.py3-none-any.whl (18 kB)
Collecting gitdb&lt;5,&gt;=4.0.1
  Downloading gitdb-4.0.9-py3-none-any.whl (63 kB)
Collecting smmap&lt;6,&gt;=3.0.1
  Downloading smmap-5.0.0-py3-none-any.whl (24 kB)
Collecting rsa&lt;5,&gt;=3.1.4
  Downloading rsa-4.8-py3-none-any.whl (39 kB)
Collecting cachetools&lt;5.0,&gt;=2.0.0
  Downloading cachetools-4.2.4-py3-none-any.whl (10 kB)
Collecting pyasn1-modules&gt;=0.2.1
  Downloading pyasn1_modules-0.2.8-py2.py3-none-any.whl (155 kB)
Collecting jupyter-client
  Downloading jupyter_client-7.1.2-py3-none-any.whl (130 kB)
Collecting traitlets&gt;=4.1.0
  Downloading traitlets-5.1.1-py3-none-any.whl (102 kB)
Collecting ipython-genutils
  Downloading ipython_genutils-0.2.0-py2.py3-none-any.whl (26 kB)
Collecting pygments
  Downloading Pygments-2.11.2-py3-none-any.whl (1.1 MB)
Collecting prompt-toolkit!=3.0.0,!=3.0.1,&lt;3.1.0,&gt;=2.0.0
  Downloading prompt_toolkit-3.0.24-py3-none-any.whl (374 kB)
Collecting pexpect
  Downloading pexpect-4.8.0-py2.py3-none-any.whl (59 kB)
Collecting pickleshare
  Downloading pickleshare-0.7.5-py2.py3-none-any.whl (6.9 kB)
Collecting backcall
  Downloading backcall-0.2.0-py2.py3-none-any.whl (11 kB)
Collecting jedi&lt;=0.17.2,&gt;=0.10
  Downloading jedi-0.17.2-py2.py3-none-any.whl (1.4 MB)
Collecting parso&lt;0.8.0,&gt;=0.7.0
  Downloading parso-0.7.1-py2.py3-none-any.whl (109 kB)
Collecting MarkupSafe&gt;=2.0
  Downloading MarkupSafe-2.0.1-cp37-cp37m-manylinux_2_5_x86_64.manylinux1_x86_64.manylinux_2_12_x86_64.manylinux2010_x86_64.whl (31 kB)
Collecting google-cloud-storage&gt;=1.13.0
  Downloading google_cloud_storage-2.1.0-py2.py3-none-any.whl (106 kB)
Collecting requests_toolbelt&gt;=0.8.0
  Downloading requests_toolbelt-0.9.1-py2.py3-none-any.whl (54 kB)
Collecting kfp-server-api&lt;2.0.0,&gt;=0.2.5
  Downloading kfp-server-api-1.7.1.tar.gz (52 kB)
Collecting jsonschema&gt;=3.0.1
  Downloading jsonschema-4.4.0-py3-none-any.whl (72 kB)
Collecting Deprecated
  Downloading Deprecated-1.2.13-py2.py3-none-any.whl (9.6 kB)
Collecting strip-hints
  Downloading strip-hints-0.1.10.tar.gz (29 kB)
Collecting google-cloud-core&lt;3.0dev,&gt;=1.6.0
  Downloading google_cloud_core-2.2.2-py2.py3-none-any.whl (29 kB)
Collecting protobuf
  Downloading protobuf-3.19.3-cp37-cp37m-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (1.1 MB)
Collecting google-resumable-media&gt;=1.3.0
  Downloading google_resumable_media-2.1.0-py2.py3-none-any.whl (75 kB)
Collecting google-api-core&lt;3.0dev,&gt;=1.29.0
  Downloading google_api_core-2.4.0-py2.py3-none-any.whl (111 kB)
Collecting googleapis-common-protos&lt;2.0dev,&gt;=1.52.0
  Downloading googleapis_common_protos-1.54.0-py2.py3-none-any.whl (207 kB)
Collecting google-crc32c&lt;2.0dev,&gt;=1.0
  Downloading google_crc32c-1.3.0-cp37-cp37m-manylinux_2_12_x86_64.manylinux2010_x86_64.whl (38 kB)
Requirement already satisfied: importlib-metadata in /usr/local/lib/python3.7/site-packages (from jsonschema&gt;=3.0.1-&gt;kfp~=1.0.1-&gt;mlrun[complete]==0.10.0-rc4) (4.10.1)
Collecting importlib-resources&gt;=1.4.0
  Downloading importlib_resources-5.4.0-py3-none-any.whl (28 kB)
Collecting pyrsistent!=0.17.0,!=0.17.1,!=0.17.2,&gt;=0.14.0
  Downloading pyrsistent-0.18.1-cp37-cp37m-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (117 kB)
Requirement already satisfied: zipp&gt;=3.1.0 in /usr/local/lib/python3.7/site-packages (from importlib-resources&gt;=1.4.0-&gt;jsonschema&gt;=3.0.1-&gt;kfp~=1.0.1-&gt;mlrun[complete]==0.10.0-rc4) (3.7.0)
Requirement already satisfied: certifi in /usr/local/lib/python3.7/site-packages (from kfp-server-api&lt;2.0.0,&gt;=0.2.5-&gt;kfp~=1.0.1-&gt;mlrun[complete]==0.10.0-rc4) (2021.10.8)
Requirement already satisfied: websocket-client!=0.40.0,!=0.41.*,!=0.42.*,&gt;=0.32.0 in /usr/local/lib/python3.7/site-packages (from kubernetes~=11.0-&gt;mlrun[complete]==0.10.0-rc4) (1.2.3)
Requirement already satisfied: requests-oauthlib in /usr/local/lib/python3.7/site-packages (from kubernetes~=11.0-&gt;mlrun[complete]==0.10.0-rc4) (1.3.0)
Requirement already satisfied: portalocker&lt;3,&gt;=1.0 in /usr/local/lib/python3.7/site-packages (from msal-extensions~=0.3.0-&gt;azure-identity~=1.5-&gt;mlrun[complete]==0.10.0-rc4) (1.7.1)
Requirement already satisfied: isodate&gt;=0.6.0 in /usr/local/lib/python3.7/site-packages (from msrest&gt;=0.6.21-&gt;azure-keyvault-secrets~=4.2-&gt;mlrun[complete]==0.10.0-rc4) (0.6.1)
Collecting nbconvert&gt;=5.4
  Downloading nbconvert-6.4.0-py3-none-any.whl (557 kB)
Collecting notebook&gt;=5.2.0
  Downloading notebook-6.4.8-py3-none-any.whl (9.9 MB)
Collecting entrypoints&gt;=0.2.2
  Downloading entrypoints-0.3-py2.py3-none-any.whl (11 kB)
Collecting testpath
  Downloading testpath-0.5.0-py3-none-any.whl (84 kB)
Collecting defusedxml
  Downloading defusedxml-0.7.1-py2.py3-none-any.whl (25 kB)
Collecting bleach
  Downloading bleach-4.1.0-py2.py3-none-any.whl (157 kB)
Collecting jupyterlab-pygments
  Downloading jupyterlab_pygments-0.1.2-py2.py3-none-any.whl (4.6 kB)
Collecting pandocfilters&gt;=1.4.1
  Downloading pandocfilters-1.5.0-py2.py3-none-any.whl (8.7 kB)
Collecting nbformat&gt;=4.4
  Downloading nbformat-5.1.3-py3-none-any.whl (178 kB)
Collecting jupyter-core
  Downloading jupyter_core-4.9.1-py3-none-any.whl (86 kB)
Collecting nbclient&lt;0.6.0,&gt;=0.5.0
  Downloading nbclient-0.5.10-py3-none-any.whl (69 kB)
Collecting mistune&lt;2,&gt;=0.8.1
  Downloading mistune-0.8.4-py2.py3-none-any.whl (16 kB)
Collecting pyzmq&gt;=13
  Downloading pyzmq-22.3.0-cp37-cp37m-manylinux_2_5_x86_64.manylinux1_x86_64.whl (1.1 MB)
Collecting prometheus-client
  Downloading prometheus_client-0.13.0-py3-none-any.whl (56 kB)
Collecting argon2-cffi
  Downloading argon2_cffi-21.3.0-py3-none-any.whl (14 kB)
Collecting terminado&gt;=0.8.3
  Downloading terminado-0.12.1-py3-none-any.whl (15 kB)
Collecting Send2Trash&gt;=1.8.0
  Downloading Send2Trash-1.8.0-py3-none-any.whl (18 kB)
Collecting pyparsing!=3.0.5,&gt;=2.0.2
  Downloading pyparsing-3.0.7-py3-none-any.whl (98 kB)
Requirement already satisfied: pytz&gt;=2017.3 in /usr/local/lib/python3.7/site-packages (from pandas~=1.2-&gt;mlrun[complete]==0.10.0-rc4) (2021.3)
Collecting tenacity&gt;=6.2.0
  Downloading tenacity-8.0.1-py3-none-any.whl (24 kB)
Collecting wcwidth
  Downloading wcwidth-0.2.5-py2.py3-none-any.whl (30 kB)
Requirement already satisfied: pyasn1&lt;0.5.0,&gt;=0.4.6 in /usr/local/lib/python3.7/site-packages (from pyasn1-modules&gt;=0.2.1-&gt;google-auth&lt;2.0dev,&gt;=1.25.0-&gt;mlrun[complete]==0.10.0-rc4) (0.4.8)
Requirement already satisfied: idna&lt;4,&gt;=2.5 in /usr/local/lib/python3.7/site-packages (from requests~=2.22-&gt;mlrun[complete]==0.10.0-rc4) (3.3)
Requirement already satisfied: charset-normalizer~=2.0.0 in /usr/local/lib/python3.7/site-packages (from requests~=2.22-&gt;mlrun[complete]==0.10.0-rc4) (2.0.10)
Requirement already satisfied: oauthlib&gt;=3.0.0 in /usr/local/lib/python3.7/site-packages (from requests-oauthlib-&gt;kubernetes~=11.0-&gt;mlrun[complete]==0.10.0-rc4) (3.1.1)
Collecting greenlet!=0.4.17
  Downloading greenlet-1.1.2-cp37-cp37m-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (150 kB)
Collecting storey~=0.10.3
  Downloading storey-0.10.3-py3-none-any.whl (116 kB)
Collecting grpcio-tools&lt;1.42,&gt;1.34.0
  Downloading grpcio_tools-1.41.1-cp37-cp37m-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (2.4 MB)
Collecting grpcio&lt;1.42,&gt;1.34.0
  Downloading grpcio-1.41.1-cp37-cp37m-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (3.9 MB)
Collecting ptyprocess
  Downloading ptyprocess-0.7.0-py2.py3-none-any.whl (13 kB)
Collecting future&gt;=0.18.2
  Downloading future-0.18.2.tar.gz (829 kB)
Collecting ujson&gt;=3.0.0
  Downloading ujson-5.1.0-cp37-cp37m-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (43 kB)
Collecting heapdict
  Downloading HeapDict-1.0.1-py3-none-any.whl (3.9 kB)
Collecting argon2-cffi-bindings
  Downloading argon2_cffi_bindings-21.2.0-cp36-abi3-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (86 kB)
Collecting webencodings
  Downloading webencodings-0.5.1-py2.py3-none-any.whl (11 kB)
Requirement already satisfied: wheel in /usr/local/lib/python3.7/site-packages (from strip-hints-&gt;kfp~=1.0.1-&gt;mlrun[complete]==0.10.0-rc4) (0.36.2)
Building wheels for collected packages: adlfs, aiobotocore, bokeh, ordered-set, kfp, kfp-server-api, tabulate, future, strip-hints
  Building wheel for adlfs (setup.py): started
  Building wheel for adlfs (setup.py): finished with status 'done'
  Created wheel for adlfs: filename=adlfs-2021.8.2-py3-none-any.whl size=21466 sha256=25321a42e5228871396c4d5506cf3c810844e35d58298cfa52a94ed188cff227
  Stored in directory: /root/.cache/pip/wheels/0d/88/1d/e06072abb7fb4d59b5cf94e194e53017dfa2dc47af4dec88b7
  Building wheel for aiobotocore (setup.py): started
  Building wheel for aiobotocore (setup.py): finished with status 'done'
  Created wheel for aiobotocore: filename=aiobotocore-1.4.2-py3-none-any.whl size=49910 sha256=69ae983318745af92c528ae149d24564d6c10838f4d2a01fea4675c07bf04853
  Stored in directory: /root/.cache/pip/wheels/33/e7/d9/b297a9aa9c43d56bc2463e6e2771655ff638f30b30f0b61fcb
  Building wheel for bokeh (setup.py): started
  Building wheel for bokeh (setup.py): finished with status 'done'
  Created wheel for bokeh: filename=bokeh-2.3.3-py3-none-any.whl size=11342778 sha256=3df9f11dff8ca05e42607c131c04ef8ae1c6d442f0c4565481bc518e1d95e0db
  Stored in directory: /root/.cache/pip/wheels/57/e3/79/051e58e8a3d9076de99bdd7d68d463289e28c18329933984ff
  Building wheel for ordered-set (setup.py): started
  Building wheel for ordered-set (setup.py): finished with status 'done'
  Created wheel for ordered-set: filename=ordered_set-4.0.2-py2.py3-none-any.whl size=8210 sha256=e0f9c8fc4a8f0cee8519362578a5ab3232f699d6dd55f055e4a580eae49dce5c
  Stored in directory: /root/.cache/pip/wheels/73/2b/f6/26e9f84153c25050fe7c09e88f8e32a6be3c7034a38c418319
  Building wheel for kfp (setup.py): started
  Building wheel for kfp (setup.py): finished with status 'done'
  Created wheel for kfp: filename=kfp-1.0.4-py3-none-any.whl size=159872 sha256=1e18025c86d3b0618111724ddaf03be3e583c6807196012ec95c475e3e403584
  Stored in directory: /root/.cache/pip/wheels/65/1c/be/3d7366d2288bf1587e4fe6cd0c1ebdce5e3bada21b70a29e66
  Building wheel for kfp-server-api (setup.py): started
  Building wheel for kfp-server-api (setup.py): finished with status 'done'
  Created wheel for kfp-server-api: filename=kfp_server_api-1.7.1-py3-none-any.whl size=92618 sha256=7ca2670264cecdadb60ecb701e1d2fb089c8747e81711f8dcc8c35e518526c42
  Stored in directory: /root/.cache/pip/wheels/68/3f/d5/734c0278dd6c8969cef359edcf059505a61452c5eb0e2760e1
  Building wheel for tabulate (setup.py): started
  Building wheel for tabulate (setup.py): finished with status 'done'
  Created wheel for tabulate: filename=tabulate-0.8.3-py3-none-any.whl size=23379 sha256=0e57ce3f67620b4a27f094c698d6dfb2309cbd98804041ffd0e0d6b5f7918413
  Stored in directory: /root/.cache/pip/wheels/b8/a2/a6/812a8a9735b090913e109133c7c20aaca4cf07e8e18837714f
  Building wheel for future (setup.py): started
  Building wheel for future (setup.py): finished with status 'done'
  Created wheel for future: filename=future-0.18.2-py3-none-any.whl size=491059 sha256=a06e41095a04a184e7eda29c1012a5704304012f01ffdd2f192a61a0e9543f84
  Stored in directory: /root/.cache/pip/wheels/56/b0/fe/4410d17b32f1f0c3cf54cdfb2bc04d7b4b8f4ae377e2229ba0
  Building wheel for strip-hints (setup.py): started
  Building wheel for strip-hints (setup.py): finished with status 'done'
  Created wheel for strip-hints: filename=strip_hints-0.1.10-py2.py3-none-any.whl size=22279 sha256=3938e18e8bbcd56d3391dd7c48167e695cfe4b37c420cd099d3a04488fa3272e
  Stored in directory: /root/.cache/pip/wheels/5e/14/c3/6e44e9b2545f2d570b03f5b6d38c00b7534aa8abb376978363
Successfully built adlfs aiobotocore bokeh ordered-set kfp kfp-server-api tabulate future strip-hints
Installing collected packages: traitlets, pyrsistent, importlib-resources, attrs, wcwidth, tornado, rsa, pyzmq, pyparsing, pyasn1-modules, ptyprocess, protobuf, parso, nest-asyncio, jupyter-core, jsonschema, ipython-genutils, entrypoints, cachetools, webencodings, pygments, prompt-toolkit, pickleshare, pexpect, packaging, nbformat, MarkupSafe, jupyter-client, jedi, googleapis-common-protos, google-auth, decorator, cryptography, backcall, ujson, testpath, pandocfilters, nbclient, multidict, mistune, jupyterlab-pygments, Jinja2, ipython, grpcio, google-crc32c, google-api-core, future, defusedxml, botocore, bleach, argon2-cffi-bindings, yarl, wrapt, v3io, terminado, smmap, Send2Trash, s3transfer, pyyaml, prometheus-client, pandas, nbconvert, ipykernel, heapdict, grpcio-tools, greenlet, google-resumable-media, google-cloud-core, fsspec, chardet, async-timeout, argon2-cffi, zict, v3iofs, v3io-frames, toolz, tblib, tabulate, strip-hints, starlette, sqlalchemy, sortedcontainers, requests-toolbelt, python-editor, pydantic, psutil, ordered-set, notebook, msgpack, msal-extensions, Mako, kubernetes, kfp-server-api, google-cloud-storage, gitdb, Deprecated, dask, click, boto3, aioitertools, aiohttp, tenacity, storey, semver, pymysql, pillow, orjson, nuclio-jupyter, mergedeep, kfp, inflection, humanfriendly, google-auth-oauthlib, GitPython, fastapi, distributed, deepdiff, azure-storage-blob, azure-identity, azure-datalake-store, alembic, aiobotocore, s3fs, plotly, mlrun, gcsfs, bokeh, azure-keyvault-secrets, adlfs
  Attempting uninstall: cryptography
    Found existing installation: cryptography 3.4.8
    Uninstalling cryptography-3.4.8:
      Successfully uninstalled cryptography-3.4.8
  Attempting uninstall: msal-extensions
    Found existing installation: msal-extensions 0.2.2
    Uninstalling msal-extensions-0.2.2:
      Successfully uninstalled msal-extensions-0.2.2
  Attempting uninstall: azure-identity
    Found existing installation: azure-identity 1.4.1
    Uninstalling azure-identity-1.4.1:
      Successfully uninstalled azure-identity-1.4.1
ERROR: pip's dependency resolver does not currently take into account all the packages that are installed. This behaviour is the source of the following dependency conflicts.
azureml-dataprep 2.20.1 requires azure-identity&lt;1.5.0,&gt;=1.2.0, but you have azure-identity 1.7.1 which is incompatible.
Successfully installed Deprecated-1.2.13 GitPython-3.1.26 Jinja2-3.0.3 Mako-1.1.6 MarkupSafe-2.0.1 Send2Trash-1.8.0 adlfs-2021.8.2 aiobotocore-1.4.2 aiohttp-3.7.4.post0 aioitertools-0.8.0 alembic-1.5.8 argon2-cffi-21.3.0 argon2-cffi-bindings-21.2.0 async-timeout-3.0.1 attrs-21.4.0 azure-datalake-store-0.0.52 azure-identity-1.7.1 azure-keyvault-secrets-4.3.0 azure-storage-blob-12.9.0 backcall-0.2.0 bleach-4.1.0 bokeh-2.3.3 boto3-1.17.106 botocore-1.20.106 cachetools-4.2.4 chardet-3.0.4 click-7.1.2 cryptography-3.3.2 dask-2.30.0 decorator-5.1.1 deepdiff-5.7.0 defusedxml-0.7.1 distributed-2.30.1 entrypoints-0.3 fastapi-0.67.0 fsspec-2021.8.1 future-0.18.2 gcsfs-2021.8.1 gitdb-4.0.9 google-api-core-2.4.0 google-auth-1.35.0 google-auth-oauthlib-0.4.6 google-cloud-core-2.2.2 google-cloud-storage-2.1.0 google-crc32c-1.3.0 google-resumable-media-2.1.0 googleapis-common-protos-1.54.0 greenlet-1.1.2 grpcio-1.41.1 grpcio-tools-1.41.1 heapdict-1.0.1 humanfriendly-8.2 importlib-resources-5.4.0 inflection-0.5.1 ipykernel-5.5.6 ipython-7.16.3 ipython-genutils-0.2.0 jedi-0.17.2 jsonschema-4.4.0 jupyter-client-7.1.2 jupyter-core-4.9.1 jupyterlab-pygments-0.1.2 kfp-1.0.4 kfp-server-api-1.7.1 kubernetes-11.0.0 mergedeep-1.3.4 mistune-0.8.4 mlrun-0.10.0rc4 msal-extensions-0.3.1 msgpack-1.0.3 multidict-6.0.2 nbclient-0.5.10 nbconvert-6.4.0 nbformat-5.1.3 nest-asyncio-1.5.4 notebook-6.4.8 nuclio-jupyter-0.8.22 ordered-set-4.0.2 orjson-3.3.1 packaging-21.3 pandas-1.3.5 pandocfilters-1.5.0 parso-0.7.1 pexpect-4.8.0 pickleshare-0.7.5 pillow-9.0.0 plotly-5.5.0 prometheus-client-0.13.0 prompt-toolkit-3.0.24 protobuf-3.19.3 psutil-5.9.0 ptyprocess-0.7.0 pyasn1-modules-0.2.8 pydantic-1.9.0 pygments-2.11.2 pymysql-1.0.2 pyparsing-3.0.7 pyrsistent-0.18.1 python-editor-1.0.4 pyyaml-5.4.1 pyzmq-22.3.0 requests-toolbelt-0.9.1 rsa-4.8 s3fs-2021.8.1 s3transfer-0.4.2 semver-2.13.0 smmap-5.0.0 sortedcontainers-2.4.0 sqlalchemy-1.4.31 starlette-0.14.2 storey-0.10.3 strip-hints-0.1.10 tabulate-0.8.3 tblib-1.7.0 tenacity-8.0.1 terminado-0.12.1 testpath-0.5.0 toolz-0.11.2 tornado-6.1 traitlets-5.1.1 ujson-5.1.0 v3io-0.5.15 v3io-frames-0.10.2 v3iofs-0.1.9 wcwidth-0.2.5 webencodings-0.5.1 wrapt-1.13.3 yarl-1.7.2 zict-2.0.0
WARNING: Running pip as the 'root' user can result in broken permissions and conflicting behaviour with the system package manager. It is recommended to use a virtual environment instead: https://pip.pypa.io/warnings/venv
WARNING: You are using pip version 21.2.4; however, version 21.3.1 is available.
You should consider upgrading via the '/usr/local/bin/python -m pip install --upgrade pip' command.
<span class="-Color -Color-Cyan">INFO</span>[0111] Taking snapshot of full filesystem...        
<span class="-Color -Color-Cyan">INFO</span>[0129] Pushing image to docker-registry.default-tenant.app.yh41.iguazio-cd1.com/mlrun/func-azureml-yonatan-azureml-utils:latest 
<span class="-Color -Color-Cyan">INFO</span>[0134] Pushed image to 1 destinations               
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>BuildStatus(ready=True, outputs={'image': '.mlrun/func-azureml-yonatan-azureml-utils:latest'})
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="automl-configuration-run-parameters">
<h3>Automl configuration &amp; run parameters<a class="headerlink" href="#automl-configuration-run-parameters" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>The <code class="docutils literal notranslate"><span class="pre">automl_settings</span></code> object is the setup for Azure AutoML. It holds the <code class="docutils literal notranslate"><span class="pre">task</span></code> type, number of  models to train - <code class="docutils literal notranslate"><span class="pre">iterations</span></code>, the desired metric - <code class="docutils literal notranslate"><span class="pre">primary</span> <span class="pre">metric</span></code>, the allowed types of models <code class="docutils literal notranslate"><span class="pre">allowed_models</span></code> and more.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">params</span></code> are the parameters for the MLRun function, such as experiment (<code class="docutils literal notranslate"><span class="pre">experiment_name</span></code>) and cpu cluster (<code class="docutils literal notranslate"><span class="pre">cpu_cluster_name</span></code>) names in AzureML, dataset properties for registration, target label for training - <code class="docutils literal notranslate"><span class="pre">label_column_name</span></code>, number of models to download <code class="docutils literal notranslate"><span class="pre">save_n_models</span></code> and more.</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">label_column_name</span> <span class="o">=</span> <span class="s1">'label'</span> <span class="c1"># target label</span>

<span class="c1"># Configure automl settings:</span>
<span class="n">automl_settings</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">"task"</span><span class="p">:</span> <span class="s1">'classification'</span><span class="p">,</span>
            <span class="s2">"debug_log"</span><span class="p">:</span> <span class="s1">'automl_errors.log'</span><span class="p">,</span>
<span class="c1">#             "experiment_exit_score" : 0.9,</span>
            <span class="s2">"enable_early_stopping"</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
            <span class="s2">"allowed_models"</span><span class="p">:</span> <span class="p">[</span><span class="s1">'LogisticRegression'</span><span class="p">,</span> <span class="s1">'SGD'</span><span class="p">,</span> <span class="s1">'SVM'</span><span class="p">],</span>
            <span class="s2">"iterations"</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span>
            <span class="s2">"iteration_timeout_minutes"</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
            <span class="s2">"max_concurrent_iterations"</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
            <span class="s2">"max_cores_per_iteration"</span><span class="p">:</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span>
            <span class="s2">"n_cross_validations"</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span>
            <span class="s2">"primary_metric"</span><span class="p">:</span> <span class="s1">'accuracy'</span><span class="p">,</span>
            <span class="s2">"featurization"</span><span class="p">:</span> <span class="s1">'off'</span><span class="p">,</span>
            <span class="s2">"model_explainability"</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
            <span class="s2">"enable_voting_ensemble"</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
            <span class="s2">"enable_stack_ensemble"</span><span class="p">:</span> <span class="kc">False</span>
        <span class="p">}</span>

<span class="c1"># Setting params to azure_run function:</span>
<span class="n">params</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">"experiment_name"</span><span class="p">:</span> <span class="s1">'azure-automl-test'</span><span class="p">,</span>
    <span class="s2">"cpu_cluster_name"</span><span class="p">:</span> <span class="s1">'azureml-cpu'</span><span class="p">,</span>
    <span class="s2">"dataset_name"</span><span class="p">:</span> <span class="s1">'iris'</span><span class="p">,</span>
    <span class="s2">"dataset_description"</span><span class="p">:</span> <span class="s1">'iris training data'</span><span class="p">,</span>
    <span class="s2">"label_column_name"</span><span class="p">:</span> <span class="n">label_column_name</span><span class="p">,</span>
    <span class="s2">"create_new_version"</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
    <span class="s2">"register_model_name"</span><span class="p">:</span> <span class="s2">"iris-model"</span><span class="p">,</span>
    <span class="s2">"save_n_models"</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span>
    <span class="s2">"automl_settings"</span><span class="p">:</span> <span class="n">automl_settings</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="run-azure-automl-train">
<h3>Run Azure AutoML train:<a class="headerlink" href="#run-azure-automl-train" title="Permalink to this headline">¶</a></h3>
<p>This MLRun function will perform the following:</p>
<ul class="simple">
<li><p>Initialize workspace and experiment in your AzureML</p></li>
<li><p>Register the dataset/feature vector to Iguazio and to AzureML.</p></li>
<li><p>Submit the training job to AzureML and print the live training results fro each model</p></li>
<li><p>Generate the top trained models.</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">azureml_run</span> <span class="o">=</span> <span class="n">azureml_fn</span><span class="o">.</span><span class="n">run</span><span class="p">(</span>
    <span class="n">handler</span><span class="o">=</span><span class="s2">"train"</span><span class="p">,</span>
    <span class="n">inputs</span><span class="o">=</span><span class="p">{</span><span class="s2">"dataset"</span><span class="p">:</span> <span class="n">DATA_URL</span><span class="p">},</span>
    <span class="n">params</span><span class="o">=</span><span class="n">params</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&gt; 2022-01-26 12:59:55,828 [info] starting run azureml-utils-train uid=10833aba5c1c442eb5eac7b12d6a9234 DB=http://mlrun-api:8080
&gt; 2022-01-26 12:59:55,987 [info] Job is running in the background, pod: azureml-utils-train-7xprl
Failure while loading azureml_run_type_providers. Failed to load entrypoint automl = azureml.train.automl.run:AutoMLRun._from_run_dto with exception (azure-identity 1.7.1 (/usr/local/lib/python3.7/site-packages), Requirement.parse('azure-identity&lt;1.5.0,&gt;=1.2.0'), {'azureml-dataprep'}).
&gt; 2022-01-26 13:00:29,030 [info] Loading AzureML Workspace
&gt; 2022-01-26 13:00:31,336 [info] Initializing AzureML experiment azure-automl-test
&gt; 2022-01-26 13:00:32,801 [info] Initializing AzureML compute target azureml-cpu
&gt; 2022-01-26 13:00:33,078 [info] Found existing cluster, will use it.
Succeeded
AmlCompute wait for completion finished

Minimum number of nodes requested have been provisioned
&gt; 2022-01-26 13:00:33,224 [info] Connecting to AzureML experiment default datastore
&gt; 2022-01-26 13:00:34,103 [info] Retrieving feature vector and uploading to Azure blob storage: az://azureml-blobstore-27f8977b-4946-4ca0-bdc5-5a685d2fe8d7/iris.csv
&gt; 2022-01-26 13:00:34,456 [info] Registering dataset iris in Azure ML
&gt; 2022-01-26 13:00:34,456 [info] OpenSSL version must be 1.1. Overriding the OpenSSL version to 1.1
&gt; 2022-01-26 13:00:42,723 [info] Setting up experiment parameters
&gt; 2022-01-26 13:00:42,959 [info] Submitting and running experiment
Submitting remote run.
Parent Run ID: AutoML_d06f4649-737d-41d1-a148-7f4bb85007e5
https://ml.azure.com/runs/AutoML_d06f4649-737d-41d1-a148-7f4bb85007e5?wsid=/subscriptions/8d81bc0b-6abd-4395-be83-000251d9fdbe/resourcegroups/nick/workspaces/NickAzureML&amp;tid=af053911-a8b7-450d-9f58-0c08567d4769

Current status: ModelSelection. Beginning model selection.

****************************************************************************************************
DATA GUARDRAILS: 

TYPE:         Class balancing detection
STATUS:       PASSED
DESCRIPTION:  Your inputs were analyzed, and all classes are balanced in your training data.
              Learn more about imbalanced data: https://aka.ms/AutomatedMLImbalancedData

****************************************************************************************************

****************************************************************************************************
ITERATION: The iteration being evaluated.
PIPELINE: A summary description of the pipeline being evaluated.
DURATION: Time taken for the current iteration.
METRIC: The result of computing score on the fitted pipeline.
BEST: The best observed score thus far.
****************************************************************************************************

 ITERATION   PIPELINE                                       DURATION      METRIC      BEST
         0   RobustScaler LogisticRegression                0:00:18       0.9667    0.9667
         1   StandardScalerWrapper SVM                      0:00:15       0.9600    0.9667
         2   StandardScalerWrapper LogisticRegression       0:00:17       0.9733    0.9733
         3   MaxAbsScaler LogisticRegression                0:00:17       0.9533    0.9733
         4   MaxAbsScaler LogisticRegression                0:00:16       0.9733    0.9733

********************************************************************************************

&gt; 2022-01-26 13:10:48,915 [info] Registering model
&gt; 2022-01-26 13:10:50,380 [info] Registered model with name 'iris-model', id 'iris-model:160', version '160'
&gt; 2022-01-26 13:10:50,380 [info] Downloading model iris-model:160
&gt; 2022-01-26 13:10:56,894 [info] Logging model_1_maxabsscaler_logisticregression model to MLRun
&gt; 2022-01-26 13:10:57,148 [info] Registering model
&gt; 2022-01-26 13:10:59,200 [info] Registered model with name 'iris-model', id 'iris-model:161', version '161'
&gt; 2022-01-26 13:10:59,200 [info] Downloading model iris-model:161
&gt; 2022-01-26 13:11:05,756 [info] Logging model_2_standardscaler_logisticregression model to MLRun
&gt; 2022-01-26 13:11:05,940 [info] Registering model
&gt; 2022-01-26 13:11:07,111 [info] Registered model with name 'iris-model', id 'iris-model:162', version '162'
&gt; 2022-01-26 13:11:07,112 [info] Downloading model iris-model:162
&gt; 2022-01-26 13:11:13,323 [info] Logging model_3_robustscaler_logisticregression model to MLRun
final state: completed
</pre></div>
</div>
<div class="output text_html"><style>
.dictlist {
  background-color: #4EC64B;
  text-align: center;
  margin: 4px;
  border-radius: 3px; padding: 0px 3px 1px 3px; display: inline-block;}
.artifact {
  cursor: pointer;
  background-color: #4EC64B;
  text-align: left;
  margin: 4px; border-radius: 3px; padding: 0px 3px 1px 3px; display: inline-block;
}
div.block.hidden {
  display: none;
}
.clickable {
  cursor: pointer;
}
.ellipsis {
  display: inline-block;
  max-width: 60px;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}
.master-wrapper {
  display: flex;
  flex-flow: row nowrap;
  justify-content: flex-start;
  align-items: stretch;
}
.master-tbl {
  flex: 3
}
.master-wrapper > div {
  margin: 4px;
  padding: 10px;
}
iframe.fileview {
  border: 0 none;
  height: 100%;
  width: 100%;
  white-space: pre-wrap;
}
.pane-header-title {
  width: 80%;
  font-weight: 500;
}
.pane-header {
  line-height: 1;
  background-color: #4EC64B;
  padding: 3px;
}
.pane-header .close {
  font-size: 20px;
  font-weight: 700;
  float: right;
  margin-top: -5px;
}
.master-wrapper .right-pane {
  border: 1px inset silver;
  width: 40%;
  min-height: 300px;
  flex: 3
  min-width: 500px;
}
.master-wrapper * {
  box-sizing: border-box;
}
</style><script>
function copyToClipboard(fld) {
    if (document.queryCommandSupported && document.queryCommandSupported('copy')) {
        var textarea = document.createElement('textarea');
        textarea.textContent = fld.innerHTML;
        textarea.style.position = 'fixed';
        document.body.appendChild(textarea);
        textarea.select();

        try {
            return document.execCommand('copy'); // Security exception may be thrown by some browsers.
        } catch (ex) {

        } finally {
            document.body.removeChild(textarea);
        }
    }
}
function expandPanel(el) {
  const panelName = "#" + el.getAttribute('paneName');
  console.log(el.title);

  document.querySelector(panelName + "-title").innerHTML = el.title
  iframe = document.querySelector(panelName + "-body");

  const tblcss = `<style> body { font-family: Arial, Helvetica, sans-serif;}
    #csv { margin-bottom: 15px; }
    #csv table { border-collapse: collapse;}
    #csv table td { padding: 4px 8px; border: 1px solid silver;} </style>`;

  function csvToHtmlTable(str) {
    return '<div id="csv"><table><tr><td>' +  str.replace(/[\n\r]+$/g, '').replace(/[\n\r]+/g, '</td></tr><tr><td>')
      .replace(/,/g, '</td><td>') + '</td></tr></table></div>';
  }

  function reqListener () {
    if (el.title.endsWith(".csv")) {
      iframe.setAttribute("srcdoc", tblcss + csvToHtmlTable(this.responseText));
    } else {
      iframe.setAttribute("srcdoc", this.responseText);
    }
    console.log(this.responseText);
  }

  const oReq = new XMLHttpRequest();
  oReq.addEventListener("load", reqListener);
  oReq.open("GET", el.title);
  oReq.send();


  //iframe.src = el.title;
  const resultPane = document.querySelector(panelName + "-pane");
  if (resultPane.classList.contains("hidden")) {
    resultPane.classList.remove("hidden");
  }
}
function closePanel(el) {
  const panelName = "#" + el.getAttribute('paneName')
  const resultPane = document.querySelector(panelName + "-pane");
  if (!resultPane.classList.contains("hidden")) {
    resultPane.classList.add("hidden");
  }
}

</script>
<div class="master-wrapper">
<div class="block master-tbl"><div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
<thead>
<tr style="text-align: right;">
<th>project</th>
<th>uid</th>
<th>iter</th>
<th>start</th>
<th>state</th>
<th>name</th>
<th>labels</th>
<th>inputs</th>
<th>parameters</th>
<th>results</th>
<th>artifacts</th>
</tr>
</thead>
<tbody>
<tr>
<td>azureml-yonatan</td>
<td><div title="10833aba5c1c442eb5eac7b12d6a9234"><a href="https://dashboard.default-tenant.app.yh41.iguazio-cd1.com/mlprojects/azureml-yonatan/jobs/monitor/10833aba5c1c442eb5eac7b12d6a9234/overview" target="_blank">...2d6a9234</a></div></td>
<td>0</td>
<td>Jan 26 13:00:28</td>
<td>completed</td>
<td>azureml-utils-train</td>
<td><div class="dictlist">v3io_user=yonatan</div><div class="dictlist">kind=job</div><div class="dictlist">owner=yonatan</div><div class="dictlist">host=azureml-utils-train-7xprl</div></td>
<td><div title="https://s3.wasabisys.com/iguazio/data/iris/iris_dataset.csv">dataset</div></td>
<td><div class="dictlist">experiment_name=azure-automl-test</div><div class="dictlist">cpu_cluster_name=azureml-cpu</div><div class="dictlist">dataset_name=iris</div><div class="dictlist">dataset_description=iris training data</div><div class="dictlist">label_column_name=label</div><div class="dictlist">create_new_version=True</div><div class="dictlist">register_model_name=iris-model</div><div class="dictlist">save_n_models=3</div><div class="dictlist">automl_settings={'task': 'classification', 'debug_log': 'automl_errors.log', 'enable_early_stopping': False, 'allowed_models': ['LogisticRegression', 'SGD', 'SVM'], 'iterations': 5, 'iteration_timeout_minutes': 2, 'max_concurrent_iterations': 2, 'max_cores_per_iteration': -1, 'n_cross_validations': 5, 'primary_metric': 'accuracy', 'featurization': 'off', 'model_explainability': False, 'enable_voting_ensemble': False, 'enable_stack_ensemble': False}</div></td>
<td><div class="dictlist">dataset_blob_path=az://azureml-blobstore-27f8977b-4946-4ca0-bdc5-5a685d2fe8d7/iris.csv</div><div class="dictlist">best_iteration=1</div><div class="dictlist">balanced_accuracy=0.9729629629629629</div><div class="dictlist">recall_score_micro=0.9733333333333334</div><div class="dictlist">auc_weighted=0.9972857142857142</div><div class="dictlist">weighted_accuracy=0.9739694654594448</div><div class="dictlist">precision_score_weighted=0.9767380952380952</div><div class="dictlist">f1_score_weighted=0.9730901151988108</div><div class="dictlist">accuracy=0.9733333333333334</div><div class="dictlist">average_precision_score_macro=0.9952267382822939</div><div class="dictlist">auc_macro=0.9973298059964726</div><div class="dictlist">precision_score_macro=0.9754761904761905</div><div class="dictlist">precision_score_micro=0.9733333333333334</div><div class="dictlist">f1_score_macro=0.9721779225097302</div><div class="dictlist">f1_score_micro=0.9733333333333334</div><div class="dictlist">recall_score_macro=0.9729629629629629</div><div class="dictlist">norm_macro_recall=0.9594444444444443</div><div class="dictlist">matthews_correlation=0.9613232982405628</div><div class="dictlist">log_loss=0.07249246734411609</div><div class="dictlist">recall_score_weighted=0.9733333333333334</div><div class="dictlist">average_precision_score_micro=0.9962110898173272</div><div class="dictlist">average_precision_score_weighted=0.9952664742664743</div><div class="dictlist">auc_micro=0.998</div></td>
<td><div title="v3io:///projects/azureml-yonatan/artifacts/models/1/">model</div></td>
</tr>
</tbody>
</table>
</div></div>
<div class="right-pane block hidden" id="result4f5ca097-pane">
<div class="pane-header">
<span class="pane-header-title" id="result4f5ca097-title">Title</span>
<span class="close clickable" onclick="closePanel(this)" panename="result4f5ca097">×</span>
</div>
<iframe class="fileview" id="result4f5ca097-body"></iframe>
</div>
</div>
</div><div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>
</pre></div>
</div>
<div class="output text_html"><b> &gt; to track results use the .show() or .logs() methods  or <a href="https://dashboard.default-tenant.app.yh41.iguazio-cd1.com/mlprojects/azureml-yonatan/jobs/monitor/10833aba5c1c442eb5eac7b12d6a9234/overview" target="_blank">click here</a> to open in UI</b></div><div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&gt; 2022-01-26 13:11:14,151 [info] run executed, status=completed
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="section" id="deploy-model-serving">
<h2>4. Deploy Model Serving<a class="headerlink" href="#deploy-model-serving" title="Permalink to this headline">¶</a></h2>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Importing serving function from marketplace:</span>
<span class="n">serving_fn</span> <span class="o">=</span> <span class="n">mlrun</span><span class="o">.</span><span class="n">new_function</span><span class="p">(</span><span class="s2">"serving"</span><span class="p">,</span> <span class="n">kind</span><span class="o">=</span><span class="s2">"serving"</span><span class="p">,</span> <span class="n">image</span><span class="o">=</span><span class="s2">"yhaviv/mlrun:dev"</span><span class="p">)</span>
<span class="n">serving_fn</span><span class="o">.</span><span class="n">with_code</span><span class="p">(</span><span class="n">body</span><span class="o">=</span><span class="s2">" "</span><span class="p">)</span>
<span class="n">serving_fn</span><span class="o">.</span><span class="n">with_requirements</span><span class="p">(</span><span class="s2">"./requirements.txt"</span><span class="p">)</span>

<span class="c1"># Set the real-time pipeline topology</span>
<span class="n">serving_fn</span><span class="o">.</span><span class="n">set_topology</span><span class="p">(</span>
    <span class="s1">'router'</span><span class="p">,</span> 
    <span class="s1">'mlrun.serving.routers.VotingEnsemble'</span>
<span class="p">)</span>

<span class="c1"># Add the trained models:</span>
<span class="n">artifacts</span> <span class="o">=</span> <span class="n">mlrun</span><span class="o">.</span><span class="n">get_run_db</span><span class="p">()</span><span class="o">.</span><span class="n">list_artifacts</span><span class="p">(</span><span class="n">project</span><span class="o">=</span><span class="n">project</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
<span class="n">models</span> <span class="o">=</span> <span class="p">{</span><span class="sa">f</span><span class="s2">"</span><span class="si">{</span><span class="n">model</span><span class="p">[</span><span class="s1">'algorithm'</span><span class="p">]</span><span class="si">}{</span><span class="n">i</span><span class="si">}</span><span class="s2">"</span> <span class="p">:</span><span class="sa">f</span><span class="s2">"</span><span class="si">{</span><span class="n">model</span><span class="p">[</span><span class="s1">'db_key'</span><span class="p">]</span><span class="si">}</span><span class="s2">#</span><span class="si">{</span><span class="n">model</span><span class="p">[</span><span class="s1">'iter'</span><span class="p">]</span><span class="si">}</span><span class="s2">"</span> 
          <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">model</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">artifacts</span><span class="p">)</span> <span class="k">if</span> <span class="n">model</span><span class="p">[</span><span class="s2">"kind"</span><span class="p">]</span><span class="o">==</span><span class="s2">"model"</span><span class="p">}</span>

<span class="c1"># model_name = ''</span>
<span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">path</span> <span class="ow">in</span> <span class="n">models</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
<span class="c1">#     model_name = name</span>
    <span class="n">serving_fn</span><span class="o">.</span><span class="n">add_model</span><span class="p">(</span>
        <span class="n">name</span><span class="p">,</span> 
        <span class="n">class_name</span><span class="o">=</span><span class="s2">"mlrun.frameworks.sklearn.PickleModelServer"</span><span class="p">,</span> 
        <span class="n">model_path</span><span class="o">=</span><span class="n">project</span><span class="o">.</span><span class="n">get_artifact_uri</span><span class="p">(</span><span class="n">path</span><span class="p">))</span>
<span class="c1">#     break</span>

<span class="n">serving_fn</span><span class="o">.</span><span class="n">spec</span><span class="o">.</span><span class="n">graph</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/azureml_utils_example_16_0.svg" src="_images/azureml_utils_example_16_0.svg"/></div>
</div>
<div class="section" id="building-and-deploying-the-serving-function">
<h3>Building and Deploying the Serving Function<a class="headerlink" href="#building-and-deploying-the-serving-function" title="Permalink to this headline">¶</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">function_address</span> <span class="o">=</span> <span class="n">serving_fn</span><span class="o">.</span><span class="n">deploy</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&gt; 2022-01-26 13:11:14,372 [info] Starting remote function deploy
2022-01-26 13:11:14  (info) Deploying function
2022-01-26 13:11:14  (info) Building
2022-01-26 13:11:15  (info) Staging files and preparing base images
2022-01-26 13:11:15  (info) Building processor image
2022-01-26 13:11:16  (info) Build complete
&gt; 2022-01-26 13:11:23,930 [info] successfully deployed function: {'internal_invocation_urls': ['nuclio-azureml-yonatan-serving.default-tenant.svc.cluster.local:8080'], 'external_invocation_urls': ['azureml-yonatan-serving-azureml-yonatan.default-tenant.app.yh41.iguazio-cd1.com/']}
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="section" id="using-the-live-model-serving-function">
<h2>5. Using the Live Model-Serving Function<a class="headerlink" href="#using-the-live-model-serving-function" title="Permalink to this headline">¶</a></h2>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span> <span class="p">(</span><span class="sa">f</span><span class="s1">'The address for the function is </span><span class="si">{</span><span class="n">function_address</span><span class="si">}</span><span class="s1"> </span><span class="se">\n</span><span class="s1">'</span><span class="p">)</span>

<span class="o">!</span>curl <span class="nv">$function_address</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>The address for the function is http://azureml-yonatan-serving-azureml-yonatan.default-tenant.app.yh41.iguazio-cd1.com/ 

{"name": "VotingEnsemble", "version": "v2", "extensions": []}
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Data for testing:</span>
<span class="n">source_df</span> <span class="o">=</span> <span class="n">mlrun</span><span class="o">.</span><span class="n">get_dataitem</span><span class="p">(</span><span class="n">DATA_URL</span><span class="p">)</span><span class="o">.</span><span class="n">as_df</span><span class="p">()</span>
<span class="n">test_vector</span> <span class="o">=</span> <span class="n">source_df</span><span class="o">.</span><span class="n">sample</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="s1">'label'</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">values</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
<span class="n">test_vector</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[[5.1, 3.3, 1.7, 0.5],
 [5.0, 3.0, 1.6, 0.2],
 [5.3, 3.7, 1.5, 0.2],
 [6.9, 3.1, 5.1, 2.3],
 [5.5, 2.6, 4.4, 1.2]]
</pre></div>
</div>
</div>
</div>
<p>After deploying the serving function with the required model we can make prediction:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">serving_fn</span><span class="o">.</span><span class="n">invoke</span><span class="p">(</span><span class="sa">f</span><span class="s1">'/v2/models/infer'</span><span class="p">,</span> <span class="p">{</span><span class="s2">"inputs"</span><span class="p">:</span> <span class="n">test_vector</span><span class="p">})</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&gt; 2022-01-26 13:11:24,906 [info] invoking function: {'method': 'POST', 'path': 'http://nuclio-azureml-yonatan-serving.default-tenant.svc.cluster.local:8080/v2/models/infer'}
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>{'id': '78ff5a14-3349-4ede-b30c-110134459c22',
 'model_name': 'VotingEnsemble',
 'outputs': [0, 0, 0, 2, 1],
 'model_version': 'v1'}
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="clean-up">
<h2>6. Clean up<a class="headerlink" href="#clean-up" title="Permalink to this headline">¶</a></h2>
<p>For cleaning up AzureML resources see:
https://docs.microsoft.com/en-us/azure/machine-learning/tutorial-auto-train-models#clean-up-resources</p>
</div>
</div>
</div>
<div class="prev-next-bottom">
</div>
</div>
</div>
<footer class="footer mt-5 mt-md-0">
<div class="container">
<p>
        
            © Copyright .<br/>
</p>
</div>
</footer>
</main>
</div>
</div>
<script src="../../../_static/js/index.1c5a1a01449ed65a7b51.js"></script>
</body>
</html>